!function(){"use strict";angular.module("Advertisement",[]),angular.module("Alert",[]),angular.module("Badge",[]),angular.module("Form",["pascalprecht.translate"]),angular.module("Forum",[]),angular.module("Game",[]),angular.module("GuitarNeck",[]),angular.module("Instrument",["Utilities"]).config(["$translateProvider",function(a){for(var b in z)z.hasOwnProperty(b)&&a.translations(b,z[b])}]),angular.module("Layout",[]).config(["$translateProvider",function(a){for(var b in l)l.hasOwnProperty(b)&&a.translations(b,l[b])}]),angular.module("Lesson",[]),angular.module("SheetMusic",[]),angular.module("SongBook",["ngFileUpload","Utilities"]).config(["$translateProvider",function(a){for(var b in G)G.hasOwnProperty(b)&&a.translations(b,G[b])}]),angular.module("Theory",["ngRoute","SheetMusic"]).config(["$translateProvider",function(a){for(var b in W)W.hasOwnProperty(b)&&a.translations(b,W[b])}]),angular.module("Tuning",[]),angular.module("User",[]),angular.module("Utilities",[]),angular.module("MusicTools",["ngRoute","ngAnimate","ngSanitize","ngFileUpload","ui.bootstrap","pascalprecht.translate","angular-loading-bar","Utilities","Layout","Form","Alert","Advertisement","Badge","Forum","Game","Instrument","GuitarNeck","Lesson","SongBook","Theory","Tuning","User"]).config(["$translateProvider","cfpLoadingBarProvider",function(a,b){for(var c in Z)Z.hasOwnProperty(c)&&a.translations(c,Z[c]);a.addInterpolation("$translateMessageFormatInterpolation"),a.preferredLanguage("en"),a.useSanitizeValueStrategy("sanitize"),b.includeSpinner=!1}]),angular.module("Utilities").filter("asset_path",["ApiService",function(a){return function(b){return a.getAssetPath()+b}}]),angular.module("Utilities").filter("resource_path",["ApiService",function(a){return function(b){return a.getResourcePath()+b}}]);var a=function(a,b,c,d){this.services={},this.services.$http=a,this.services.$q=b,this.services.api=c,this.services.alert=d,null===this.name&&console.error("An ApiResource must have a property `name`."),null===this.path&&console.error("An ApiResource must have a property `path`.")};a.$inject=["$http","$q","ApiService","AlertService"],a.prototype.name=null,a.prototype.path=null,a.prototype.identifier="id",a.prototype.elements=[],a.prototype.refreshElements=!1,a.prototype.query=function(a,b){var c=this.services.$q.defer();if(!this.elements||0===this.elements.length||this.refreshElements||this.refresh)this.services.$http.get(this.services.api.getServer()+this.path).success(function(a){this.refreshElements=!1,this.setElements(a),c.resolve(a)}.bind(this)).error(function(a){c.reject(a)});else{var d=this.elements;c.resolve(d)}return this.elements=c.promise,this.elements},a.prototype.setElements=function(a){this.elements=a},a.prototype.count=function(){return this.elements.length},a.prototype.get=function(a){var b=this.services.$q.defer();return this.services.$http.get(this.services.api.getServer()+this.path+"/"+a).success(function(a){b.resolve(a)}.bind(this)).error(function(a){b.reject(a)}),b.promise},a.prototype.save=function(a){a[this.identifier]?this.update(a):this["new"](a)},a.prototype["new"]=function(a){},a.prototype.newForm=function(){},a.prototype.update=function(a){},a.prototype.editForm=function(a){},a.prototype.remove=function(a){},a.prototype.apply=function(a){if("function"==typeof a)for(var b=0;b<this.elements.length;b++)a(this.elements[b])},angular.module("Utilities").service("ApiResource",a);var b=function(){};b.prototype.server="/MusicTools/web/app_dev.php",b.prototype.resourcePath="/MusicTools/web/",b.prototype.assetPath="/MusicTools/web/client/public/",b.prototype.getServer=function(){return this.server},b.prototype.getResourcePath=function(){return this.resourcePath},b.prototype.getAssetPath=function(){return this.assetPath},angular.module("Utilities").service("ApiService",[b]);var c=function(){};c.prototype.context=null,c.prototype.playFrequency=function(a,b,c){var d=new(window.AudioContext||window.webkitAudioContext),e=d.createOscillator();return e.type="sine",e.frequency.value=a,e.connect(d.destination),e.start(b),e.stop(b+c),e},angular.module("Utilities").service("SoundService",[c]);var d=function(a){this.instance=a};angular.module("Layout").controller("ConfirmModalController",["$uibModalInstance",d]);var f=function(a){this.form=a.form,this.entity=a.entity};f.$inject=["form"],f.prototype.form=null,f.prototype.entity=null,f.prototype.multipart=!1,f.prototype.isNew=function(){var a=!0;return null!==this.entity&&"undefined"!=typeof this.entity.id&&null!==this.entity.id&&0!==this.entity.id.length&&(a=!1),a},f.prototype.validate=function(){this.entity.$create()},angular.module("Layout").controller("BaseFormController",f);var g=function(a,b){this.services={},this.services.$uibModal=a,this.entities=b};g.$inject=["$uibModal","entities"],g.prototype.entities=[],g.prototype.format="detailed",g.prototype.sortBy=null,g.prototype.sortReverse=!1,g.prototype.sortFields={},g.prototype.remove=function(a){var b=this.services.$uibModal.open({templateUrl:"../app/Layout/Partial/Modal/confirm.html",controller:"ConfirmModalController",windowClass:"modal-danger"});b.result.then(function(a){},function(){})},angular.module("Utilities").controller("ListController",g),angular.module("Layout").directive("scoreField",[function(){return{restrict:"E",templateUrl:"../app/Layout/Partial/Field/score-field.html",replace:!0,scope:{model:"=",name:"@",icon:"@",editable:"@",min:"@",max:"@",step:"@"},controllerAs:"scoreFieldCtrl",bindToController:!0,controller:function(){var a={editable:!1,step:1,min:0,max:10,icon:"fa fa-star"};for(var b in a)a.hasOwnProperty(b)&&void 0==this[b]&&(this[b]=a[b]);null==this.model&&(this.model=this.min),this.values=[];for(var c=this.min+1;c<=this.max;c+=this.step)this.values.push(c)}}}]),angular.module("Layout").directive("layoutHeader",[function(){return{restrict:"E",templateUrl:"../app/Layout/Partial/Header/navbar.html",replace:!0,scope:{},link:function(a,b,c){}}}]);var h=function(){return{restrict:"E",templateUrl:"../app/Layout/Partial/list-formatter.html",replace:!0,scope:{format:"="},controllerAs:"listFormatterCtrl",bindToController:!0,controller:function(){this.switchFormat=function(a){this.format=a}}}};h.$inject=[],angular.module("Layout").directive("layoutListFormatter",h);var i=function(){return{restrict:"E",templateUrl:"../app/Layout/Partial/list-sorter.html",replace:!0,scope:{count:"=",element:"@",current:"=",reverse:"=",fields:"="},controllerAs:"listSorterCtrl",bindToController:!0,controller:function(){this.getSortType=function(){var a=null;switch(this.fields[this.current]){case"string":a="string";break;case"number":a="number"}return a},this.setCurrent=function(a){this.current=a},this.toggleReverse=function(){this.reverse=!this.reverse}}}};i.$inject=[],angular.module("Layout").directive("layoutListSorter",i),angular.module("Layout").directive("layoutPageButton",[function(){return{restrict:"E",template:'<li role="presentation" data-ng-transclude=""></li>',replace:!0,transclude:!0,scope:{},link:function(a,b,c){}}}]),angular.module("Layout").directive("layoutPageButtons",[function(){return{restrict:"E",template:'<nav class="page-buttons navbar navbar-default"><ul class=" nav navbar-nav" data-ng-transclude=""></ul></nav>',replace:!0,transclude:!0,scope:{},link:function(a,b,c){}}}]),angular.module("Layout").directive("layoutPage",[function(){return{restrict:"E",template:'<div class="container-fluid" data-ng-transclude=""></div>',replace:!0,transclude:!0}}]),angular.module("Layout").directive("layoutPageTitle",[function(){return{restrict:"E",templateUrl:"../app/Layout/Partial/Page/title.html",replace:!0,transclude:!0,scope:{hideTitle:"@"}}}]),angular.module("Layout").directive("layoutScrollable",["$document",function(a){var b={scrollInertia:100,scrollButtons:{enable:!1},scrollAmount:80,axis:"y",contentTouchScroll:!0,autoHideScrollbar:!1};return{restrict:"A",replace:!0,transclude:!0,template:'<div class="scrollable" data-ng-transclude=""></div>',scope:{options:"=layoutScrollableOptions"},link:function(c,d){function f(){g.ready(function(){g.mCustomScrollbar(b)}),$(window).on("resize",function(){g.mCustomScrollbar("update")}),a.on("hover",g,function(){a.data({"keyboard-input":"enabled"}),$(this).addClass("keyboard-input")}),a.on("mouseout",g,function(){a.data({"keyboard-input":"disabled"}),$(this).removeClass("keyboard-input")}),a.on("keydown",function(){if("enabled"===$(this).data("keyboard-input")){var a=$(".keyboard-input"),b=parseFloat($(".keyboard-input .mCSB_container").position().top),c=Math.abs(b),d=80;38===e.which?(e.preventDefault(),d>c?a.mCustomScrollbar("scrollTo","top"):a.mCustomScrollbar("scrollTo",c-d,{scrollInertia:400,scrollEasing:"easeOutCirc"})):40===e.which&&(e.preventDefault(),a.mCustomScrollbar("scrollTo",c+d,{scrollInertia:400,scrollEasing:"easeOutCirc"}))}})}c.options&&angular.extend(b,c.options);var g=$(d);f()}}}]);var j=function(a){return{restrict:"E",templateUrl:"../app/Layout/Partial/Sidebar/sidebar.html",replace:!0,scope:{},link:function(b,c,d){b.currentPath=a.path(),b.$on("$locationChangeSuccess",function(){b.currentPath=a.path()})}}};j.$inject=["$location","$route"],angular.module("Layout").directive("layoutSidebar",j);var k=function(a){return{restrict:"E",templateUrl:"../app/Layout/Partial/Sidebar/sidebar-item.html",replace:!0,scope:{icon:"@",label:"@",url:"@",currentPath:"="},link:function(a,b,c){a.$watch("currentPath",function(){a.current=a.currentPath&&0===a.currentPath.indexOf(a.url)})}}};k.$inject=["$location"],angular.module("Layout").directive("layoutSidebarItem",k);var l={};l.en={list_display_tile:"tiles",list_display_list_detailed:"detailed list",list_display_list_condensed:"condensed list"},l.fr={list_display_tile:"tuiles",list_display_list_detailed:"liste détaillée",list_display_list_condensed:"liste condensée"},angular.module("Advertisement").config(["$routeProvider",function(a){}]),angular.module("Alert").directive("alerts",[function(){return{restrict:"E",templateUrl:"../app/Alert/Partial/alerts.html",replace:!0,controllerAs:"alertsCtrl",controller:["AlertService",function(a){this.alerts=a.getAlerts(),this.removeAlert=function(b){a.removeAlert(b,!0)}}]}}]);var m=function(a){this.$timeout=a};m.prototype.alerts=[],m.prototype.displayDuration=1e3,m.prototype.getAlerts=function(){return this.alerts},m.prototype.addAlert=function(a,b,c){var d={type:a,message:b};c&&(d.timeout=this.$timeout(function(){this.removeAlert(d)}.bind(this),this.displayDuration)),this.alerts.push(d)},m.prototype.removeAlert=function(a,b){var c=this.alerts.indexOf(a);if(-1!==c){var a=this.alerts.splice(c,1);a.timeout&&b&&this.$timeout.cancel(a.timeout)}},angular.module("Alert").service("AlertService",["$timeout",m]),angular.module("Badge").config(["$routeProvider",function(a){}]);var n=function(){};n.prototype.formDef={},n.prototype.getValidHTMLMethod=function(){if("GET"==this.formDef.vars.method||"POST"==this.formDef.vars.method)var a=this.formDef.vars.method;else var a="POST";return a},n.prototype.getNotRenderedChildren=function(){var a={};return angular.forEach(this.formDef.children,function(b,c){b.rendered||(a[c]=b)}),a},n.prototype.submit=function(){},angular.module("Form").controller("FormComponentController",[n]);var o=function(){};o.prototype.formDef=null,o.prototype.getValidHTMLMethod=function(){if("GET"==this.formDef.vars.method||"POST"==this.formDef.vars.method)var a=this.formDef.vars.method;else var a="POST";return a},angular.module("Form").controller("FormWidgetController",[o]),angular.module("Form").directive("formComponent",[function(){return{restrict:"E",templateUrl:"../app/Form/Partial/form.html",replace:!0,transclude:!0,scope:{formDef:"="},controller:"FormComponentController",controllerAs:"formComponentCtrl",bindToController:!0}}]),angular.module("Form").directive("formErrors",[function(){return{restrict:"E",templateUrl:"../app/Form/Partial/form-errors.html",replace:!0,scope:{formDef:"="},controller:function(){},controllerAs:"formErrorsCtrl",bindToController:!0}}]),angular.module("Form").directive("formLabel",[function(){return{restrict:"E",templateUrl:"../app/Form/Partial/form-label.html",replace:!0,scope:{formDef:"="}}}]),angular.module("Form").directive("formRow",[function(){return{restrict:"E",templateUrl:"../app/Form/Partial/form-row.html",replace:!0,scope:{formDef:"="},controller:function(){},controllerAs:"formRowCtrl",bindToController:!0}}]),angular.module("Form").directive("formWidget",[function(){return{restrict:"E",templateUrl:"../app/Form/Partial/form-widget.html",replace:!0,transclude:!0,scope:{formDef:"="}}}]),angular.module("Forum").config(["$routeProvider",function(a){}]),angular.module("Game").config(["$routeProvider",function(a){}]);var p=function(){};p.prototype.height=300,angular.module("GuitarNeck").controller("GuitarNeckController",p);var q=function(){return this};q.prototype.renderOptions={width:null,height:null,color:{font:"#161616","default":"#303030",highlight:"#444444"}},q.prototype.redraw=function(a,b,c){console.log("Abstract Layer is redrawn."),this.renderOptions.width=b,this.renderOptions.height=c;var d=a.getContext("2d");return null!==d&&(a.width=this.renderOptions.width,a.height=this.renderOptions.height),this},angular.module("GuitarNeck").controller("AbstractLayerController",q);var r=function(){return q.apply(this,arguments),this};r.prototype=Object.create(q.prototype),r.prototype.constructor=q,r.prototype.renderOptions.references={display:!0,highlight:!0,dotSize:10},r.prototype.renderOptions.numbers={display:!0,size:30,font:{size:12,weight:"bold",family:'"Helvetica Neue",Helvetica,Arial,sans-serif'}},r.prototype.fretFirst=0,r.prototype.fretLast=24,r.prototype.fretCount=24,r.prototype.redraw=function(a,b,c){console.log("Fret Layer is redrawn."),q.prototype.redraw.apply(this,arguments);var d=a.getContext("2d");return null!==d&&this.drawFrets(d),this},r.prototype.drawFrets=function(a){for(var b=15,c=(this.renderOptions.width-30)/(this.fretLast-this.fretFirst),d=this.fretFirst;d<=this.fretLast;d++){var e=this.fretIsHighlighted(d);e&&this.renderOptions.references.display&&this.drawFretReference(a,b-c/2,d),this.drawFret(a,b,d,e),b+=c}return this},r.prototype.fretIsHighlighted=function(a){var b=!1;if(this.renderOptions.references.highlight)if(0!==a&&a%12==0)b=!0;else{var c=a%12;13!==a&&10>c&&c%2!=0&&(b=!0)}return b},r.prototype.drawFret=function(a,b,c,d){a.beginPath();var e=3;this.renderOptions.references.highlight&&(0==c?e=9:d&&(e=5));var f=this.renderOptions.color["default"];d&&(f=this.renderOptions.color.highlight),0===b/.5%2&&(b+=.5);var g=this.renderOptions.height;return this.renderOptions.references.display&&(g-=2*this.renderOptions.references.dotSize),a.moveTo(b,0),a.lineTo(b,g),a.lineWidth=e,a.strokeStyle=f,a.closePath(),a.stroke(),this.renderOptions.numbers.display&&this.fretFirst!==c&&this.fretLast!==c&&this.drawFretNumber(a,b,c,d),this},r.prototype.drawFretNumber=function(a,b,c,d){var e=0,f=this.renderOptions.color["default"];return d&&(f=this.renderOptions.color.highlight),a.beginPath(),a.fillStyle=f,a.rect(b-this.renderOptions.numbers.size/2,e,this.renderOptions.numbers.size,this.renderOptions.numbers.size),a.closePath(),a.fill(),a.beginPath(),a.font=this.renderOptions.numbers.font.weight+" "+this.renderOptions.numbers.font.size+"px "+this.renderOptions.numbers.font.family,a.fillStyle=this.renderOptions.color.font,a.textAlign="center",a.shadowColor="transparent",a.textBaseline="middle",a.closePath(),a.fillText(c,b,e+this.renderOptions.numbers.size/2),this},r.prototype.drawFretReference=function(a,b,c){var d=!1;0===c%12&&(d=!0),a.beginPath(),a.fillStyle=this.renderOptions.color.highlight;var e=this.renderOptions.height-this.renderOptions.references.dotSize;return d?(a.arc(b+this.renderOptions.references.dotSize,e,this.renderOptions.references.dotSize/2,0,2*Math.PI,!1),a.arc(b-this.renderOptions.references.dotSize,e,this.renderOptions.references.dotSize/2,0,2*Math.PI,!1)):a.arc(b,e,this.renderOptions.references.dotSize/2,0,2*Math.PI,!1),a.closePath(),a.fill(),this},angular.module("GuitarNeck").controller("FretLayerController",r);var s=function(){return q.apply(this,arguments),this};s.prototype=Object.create(q.prototype),s.prototype.constructor=s,s.prototype.redraw=function(a,b,c){return console.log("Note Layer is redrawn."),this},angular.module("GuitarNeck").controller("NoteLayerController",s);var t=function(){return q.apply(this,arguments),this};t.prototype=Object.create(q.prototype),t.prototype.constructor=t,t.prototype.redraw=function(a,b,c){console.log("String Layer is redrawn."),q.prototype.redraw.apply(this,arguments);var d=a.getContext("2d");return null!==d&&this.drawStrings(d),this},t.prototype.drawStrings=function(a){return this},t.prototype.drawString=function(a,b){var c=this.notes.get(b),d=this.getStringPosition(a),e=.5*(a+1)+.5;this.context.beginPath(),this.context.moveTo(0,d),this.context.lineTo(this.width,d),this.context.lineWidth=e,this.context.strokeStyle=this.renderOptions.stringColor,this.context.shadowColor="#000",this.context.shadowBlur=4,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.closePath(),this.context.stroke(),this.drawNote((this.renderOptions.notes.size+2)/2,d,c,this.renderOptions.notes.size,this.renderOptions.notes.defaultColor,this.renderOptions.notes.defaultFill,"#dddddd")},t.prototype.getStringPosition=function(a){var b=this.height.strings.interval*a+.5+this.height.strings.offset;return this.frets.showNumber&&(b+=this.renderOptions.fretNumberSize),b},angular.module("GuitarNeck").controller("StringLayerController",t),angular.module("GuitarNeck").directive("guitarNeckWidget",[function(){return{restrict:"E",templateUrl:"../app/GuitarNeck/Partial/GuitarNeck.html",replace:!0,scope:{guitar:"=?"},controller:"GuitarNeckController",controllerAs:"guitarNeckCtrl",bindToController:!0,link:function(a,b,c){}}}]),angular.module("GuitarNeck").directive("fretLayer",["$window",function(a){return{restrict:"E",templateUrl:"../app/GuitarNeck/Partial/Layer/FretLayer.html",replace:!0,scope:{fretFirst:"@",fretLast:"@",fretCount:"@"},controller:"FretLayerController",controllerAs:"fretLayerCtrl",bindToController:!0,link:function(b,c,d,e){var f=c.find("canvas").get(0);e.redraw(f,c.width(),c.height()),b.$watch(function(){return e.fretFirst},function(a,b){a!=b&&e.redraw(f,c.width(),c.height())}),b.$watch(function(){return e.fretLast},function(a,b){a!=b&&e.redraw(f,c.width(),c.height())}),b.$watch(function(){return e.fretCount},function(a,b){a!=b&&e.redraw(f,c.width(),c.height())}),$(a).on("resize",function(a){e.redraw(f,c.width(),c.height())})}}}]),angular.module("GuitarNeck").directive("noteLayer",["$window",function(a){return{restrict:"E",templateUrl:"../app/GuitarNeck/Partial/Layer/NoteLayer.html",replace:!0,scope:{},controller:"NoteLayerController",controllerAs:"noteLayerCtrl",bindToController:!0,link:function(b,c,d,e){e.redraw(),$(a).on("resize",function(a){e.redraw()})}}}]),angular.module("GuitarNeck").directive("stringLayer",["$window",function(a){return{restrict:"E",templateUrl:"../app/GuitarNeck/Partial/Layer/StringLayer.html",replace:!0,scope:{strings:"=?"},controller:"StringLayerController",controllerAs:"stringLayerCtrl",bindToController:!0,link:function(b,c,d,e){var f=c.get(0);e.redraw(f,c.width(),c.height()),$(a).on("resize",function(a){e.redraw(f,c.width(),c.height())})}}}]);var u=function(a,b,c,d){f.apply(this,arguments),this.uploadService=b,this.apiService=c};u.prototype=Object.create(f.prototype),u.prototype.constructor=C,u.$inject=["form","Upload","ApiService"],u.prototype.validate=function(){var a="POST",b=this.apiService.getServer()+"/instruments";this.isNew()||(a="PUT",b+="/"+this.entity.id);var c={url:b,method:a,data:{musictools_songbookbundle_song:this.entity}};this.uploadService.upload(c).then(function(a){a.data.form&&angular.merge(this.form,a.data.form)}.bind(this),function(a){})},angular.module("Instrument").controller("InstrumentCreateController",u);var v=function(a,b){g.apply(this,arguments)};v.prototype=Object.create(g.prototype),v.$inject=g.$inject,v.prototype.sortBy="name",v.prototype.sortFields={name:"string"},angular.module("Instrument").controller("InstrumentListController",v);var w=function(a){this.entity=a};w.$inject=["entity"],w.prototype.entity=null,angular.module("Instrument").controller("InstrumentShowController",w);var x=function(){return{restrict:"E",templateUrl:"../app/Instrument/Partial/menu.html",replace:!0}};angular.module("Instrument").directive("instrumentMenu",x);var y=function(){a.apply(this,arguments)};y.prototype=Object.create(a.prototype),y.$inject=a.$inject,y.prototype.name="instrument",y.prototype.path="/instruments",angular.module("Instrument").service("InstrumentResource",y),angular.module("Instrument").config(["$routeProvider",function(a){a.when("/instruments",{templateUrl:"../app/Instrument/Partial/index.html",controller:"InstrumentListController",controllerAs:"instrumentListCtrl",resolve:{entities:["$route","InstrumentResource",function(a,b){return b.query()}]}}).when("/instruments/new",{templateUrl:"../app/Instrument/Partial/CreateWizard/layout.html",controller:"InstrumentCreateController",controllerAs:"instrumentCreateCtrl",resolve:{form:[function(){return{}}],instrumentTypes:["InstrumentResource",function(a){return a.query()}]}}).when("/instruments/:id",{templateUrl:"../app/Instrument/Partial/show.html",controller:"InstrumentShowController",controllerAs:"instrumentShowCtrl",resolve:{entity:["$route","InstrumentResource",function(a,b){return b.get(a.current.params.id)}]}})}]);var z={};z.en={delete_instrument:"Delete instrument",edit_instrument:"Edit instrument",instrument:"instrument{COUNT, plural, =0{} one{} other{s}}",my_instruments_title:"My instruments",new_instrument:"Add a new instrument",no_instrument_found:"No instrument found.",show_instrument:"Show instrument"},z.fr={delete_instrument:"Supprimer l'instrument",edit_instrument:"Modifier l'instrument",instrument:"instrument{COUNT, plural, =0{} one{} other{s}}",my_instruments_title:"Mes instruments",new_instrument:"Ajouter un instrument",no_instrument_found:"Aucun instrument trouvé.",show_instrument:"Voir l'instrument"},angular.module("Lesson").config(["$routeProvider",function(a){}]);var A=function(){};A.$inject=[],A.prototype.file=null,A.prototype.component={},A.prototype.player={ready:!1,state:0,component:{}},A.prototype.play=function(){this.player.component.Play()},A.prototype.pause=function(){this.player.component.Pause()},A.prototype.previousBar=function(){},A.prototype.nextBar=function(){},angular.module("SheetMusic").controller("SheetMusicController",A);var B=function(a){return{restrict:"E",replace:!0,template:'<div class="chordTab"></div>',scope:{root:"=",chord:"="},link:function(b,c,d){a(function(){var a=":1 (3.4 3.5)",b=$(c);b.alphaTab({staves:["score","tab"],layout:{mode:"horizontal",additionalSettings:{hideInfo:!0,hideBarCount:!0}}}),b.alphaTab("tex",a)},0)}}};B.$inject=["$timeout"],angular.module("SheetMusic").directive("chordSheet",B),function(){angular.module("SheetMusic").directive("sheetMusic",["$timeout",function(a){return{restrict:"E",templateUrl:assetDirectory+"/musictoolssongbook/js/SheetMusic/Partial/sheet-music.html",replace:!0,scope:{file:"@"},bindToController:!0,controller:"SheetMusicController",controllerAs:"sheetMusicCtrl",link:function(b,c,d,e){function f(){e.player.ready?$("#loadingInfo").hide():$("#loadingInfo").show()}e.component=$(".alphaTab");var g=$(c),h=g.offset(),i=g.width(),j=g.find(".sheet-music-controls");j.offset({left:h.left}),j.width(i),a(function(){e.component.alphaTab(),e.player.component=e.component.alphaTab("playerInit",{asRoot:assetDirectory+"/musictoolssongbook/libraries/alphaTab/Samples/JavaScript/lib/alphaSynth/",swfObjectRoot:assetDirectory+"/musictoolssongbook/libraries/alphaTab/Samples/JavaScript/lib/alphaSynth/"}),e.player.component.On("ready",function(a){e.player.component.LoadSoundFontUrl(assetDirectory+"/musictoolssongbook/libraries/alphaTab/Samples/JavaScript/lib/alphaSynth/default.sf2")}),e.player.component.On("soundFontLoad",function(a,b){var c=a/b*100|0;$("#sfInfo .progress").text("("+c+"%)")}),e.player.component.On("soundFontLoaded",function(){$("#sfInfo").hide()}),e.player.component.On("readyForPlay",function(a){f(),b.$apply()}),e.player.component.On("playerStateChanged",function(a){e.player.state=a,f(),b.$apply()}),e.component.alphaTab("playerCursor")},300)}}}])}();var C=function(a,b,c){f.apply(this,arguments),this.uploadService=b,this.apiService=c};C.prototype=Object.create(f.prototype),C.prototype.constructor=C,C.$inject=["form","Upload","ApiService"],C.prototype.validate=function(){var a="POST",b=this.apiService.getServer()+"/songs";this.isNew()||(a="PUT",b+="/"+this.entity.id);var c={url:b,method:a,data:{musictools_songbookbundle_song:this.entity}};this.uploadService.upload(c).then(function(a){a.data.form&&angular.merge(this.form,a.data.form)}.bind(this),function(a){})},angular.module("SongBook").controller("SongFormController",C);var D=function(a,b){g.apply(this,arguments)};D.prototype=Object.create(g.prototype),D.$inject=g.$inject,D.prototype.sortBy="title",D.prototype.sortFields={title:"string",artist:"string",rating:"number",mastery:"number"},angular.module("SongBook").controller("SongListController",D);var E=function(a){this.entity=a};E.$inject=["entity"],E.prototype.entity=null,angular.module("SongBook").controller("SongShowController",E);var F=function(){a.apply(this,arguments)};F.prototype=Object.create(a.prototype),F.$inject=a.$inject,F.prototype.name="song",F.prototype.path="/songs",angular.module("SongBook").service("SongResource",F),angular.module("SongBook").config(["$routeProvider",function(a){a.when("/songs",{templateUrl:"../app/SongBook/Partial/index.html",controller:"SongListController",controllerAs:"songListCtrl",resolve:{entities:["$route","SongResource",function(a,b){return b.query()}]}}).when("/songs/new",{templateUrl:"../app/SongBook/Partial/form.html",controller:"SongFormController",controllerAs:"songFormCtrl",resolve:{form:["ApiService","$http","$q",function(a,b,c){var d=c.defer();return b.get(a.getServer()+"/songs/new").success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise}]}}).when("/songs/:id",{templateUrl:"../app/SongBook/Partial/show.html",controller:"SongShowController",controllerAs:"songShowCtrl",resolve:{entity:["$route","SongResource",function(a,b){return b.get(a.current.params.id)}]}}).when("/songs/:id/edit",{templateUrl:"../app/SongBook/Partial/form.html",controller:"SongFormController",controllerAs:"songFormCtrl",resolve:{form:["ApiService","$route","$http","$q",function(a,b,c,d){var e=d.defer();return c.get(a.getServer()+"/songs/"+b.current.params.id+"/edit").success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise}]}})}]);var G={};G.en={delete_song:"Delete song",edit_song:"Edit song",my_songbook_title:"My Songbook",new_song:"Add a new song",no_song_found:"No song found.",show_song:"Show song",song:"song{COUNT, plural, =0{} one{} other{s}}"},G.fr={delete_song:"Supprimer le morceau",edit_song:"Modifier le morceau",my_songbook_title:"Mon livre de chansons",new_song:"Ajouter une chanson",no_song_found:"Aucun morceau trouvé.",show_song:"Voir le morceau",song:"morceau{COUNT, plural, =0{} one{} other{x}}"};var H=function(a,b){g.apply(this,arguments)};H.prototype=Object.create(g.prototype),H.$inject=g.$inject,H.prototype.sortBy="name",H.prototype.sortFields={name:"string",notes_count:"string"},H.prototype.root=null,angular.module("Theory").controller("ChordListController",H);var I=function(a,b){this.entity=a,this.notes=b};I.$inject=["entity"],I.prototype.entity=null,angular.module("Theory").controller("ChordShowController",I);var J=function(a,b){this.services={},this.services.$uibModal=a,this.entities=b};J.$inject=["$uibModal","entities"],J.prototype.entities=[],angular.module("Theory").controller("DegreeListController",J);var K=function(a,b){this.services={},this.services.$uibModal=a,this.entities=b};K.$inject=["$uibModal","entities"],K.prototype.entities=[],K.prototype.selected=null,K.prototype.selectInterval=function(a){this.selected!==a?this.selected=a:this.selected=null},angular.module("Theory").controller("IntervalListController",K);var L=function(a,b){this.services={},this.services.$uibModal=a,this.entities=b};L.$inject=["$uibModal","entities"],L.prototype.entities=[],angular.module("Theory").controller("NoteListController",L);var M=function(a){this.services={},this.services.NoteResource=a,this.entities=a.query().then(function(a){this.entities=a,this.current||(this.current=a[0])}.bind(this))};M.$inject=["NoteResource"],M.prototype.entities=[],M.prototype.current=null,M.prototype.previous=function(){var a=this.entities.indexOf(this.current);-1!==a&&this.entities[a-1]&&(this.current=this.entities[a-1])},M.prototype.next=function(){var a=this.entities.indexOf(this.current);-1!==a&&this.entities[a+1]&&(this.current=this.entities[a+1])},angular.module("Theory").controller("NoteMenuController",M);var N=function(a,b){this.services={},this.services.$uibModal=a,this.entities=b};N.$inject=["$uibModal","entities"],N.prototype.entities=[],angular.module("Theory").controller("ScaleListController",N);var O=function(){return{restrict:"E",templateUrl:"../app/Theory/Partial/Interval/player.html",replace:!0,scope:{interval:"="},bindToController:!0,controllerAs:"intervalPlayerCtrl",controller:["$scope","SoundService","IntervalResource","NoteResource",function(a,b,c,d){this.notes=d.query().then(function(a){return this.notes=a,this.referenceNote=a[57],a}.bind(this)),this.intervals=c.query().then(function(a){this.intervals=a}.bind(this)),this.tempo=70,this.referenceNote=null,this.calculatedNote=null,this.direction="ascending",this.setDirection=function(a){a!==this.direction&&("ascending"===a||"descending"===a?this.direction=a:console.error('Invalid interval direction. It can only be "ascending" or "descending".'))},this.setInterval=function(a){this.interval=a},this.calculateNote=function(){if(this.interval&&this.direction&&this.referenceNote){if("ascending"===this.direction)var a=this.referenceNote.value+this.interval.value;else var a=this.referenceNote.value-this.interval.value;this.calculatedNote=this.notes[a]}},this.incrementReference=function(){var a=this.referenceNote.value+1;this.referenceNote=this.notes[a]},this.decrementReference=function(){var a=this.referenceNote.value-1;this.referenceNote=this.notes[a]},this.playInterval=function(){b.playFrequency(this.referenceNote.frequency,0,1),b.playFrequency(this.calculatedNote.frequency,1,1)},a.$watch(function(){return this.interval}.bind(this),this.calculateNote.bind(this)),a.$watch(function(){return this.direction}.bind(this),this.calculateNote.bind(this)),a.$watch(function(){return this.referenceNote}.bind(this),this.calculateNote.bind(this))}],compile:function(){return{pre:function(a,b,c,d){d.dropdownOptions={setHeight:b.height()-70+"px"}}}}}};O.$inject=[],angular.module("Theory").directive("intervalPlayer",O);var P=function(){return{restrict:"A",controller:["NoteResource",function(a){this.displayFlat=a.isDisplayFlat(),this.switchDisplay=function(){this.displayFlat=!this.displayFlat,a.setDisplayFlat(this.displayFlat)}}],controllerAs:"noteDisplaySwitchCtrl",bindToController:!0,link:function(a,b,c){}}};P.$inject=[],angular.module("Theory").directive("noteDisplaySwitch",P);var Q=function(a){return{restrict:"E",templateUrl:"../app/Theory/Partial/Note/menu.html",replace:!0,scope:{current:"="},controller:"NoteMenuController",controllerAs:"noteMenuCtrl",bindToController:!0,link:function(a,b,c,d){}}};Q.$inject=["NoteResource"],angular.module("Theory").directive("noteMenu",Q);var R=function(a){return{restrict:"E",templateUrl:"../app/Theory/Partial/Note/selector.html",replace:!0,scope:{current:"="},controller:function(){},controllerAs:"noteSelectorCtrl",bindToController:!0,link:function(b,c,d){b.notes=a.query().then(function(a){return b.current||(b.current=a[0]),a})}}};R.$inject=["NoteResource"],angular.module("Theory").directive("noteSelector",R),
angular.module("Theory").directive("scaleRepresentation",["NoteResource",function(a){return{restrict:"E",templateUrl:"../app/Theory/Partial/Scale/representation.html",replace:!0,scope:{},controller:function(){},controllerAs:"noteSelectorCtrl",bindToController:!0,link:function(b,c,d){function e(a,b){var c=j+(l-30)*Math.cos(a),d=k+(l-30)*Math.sin(a),e=j+(l+30)*Math.cos(a),f=k+(l+30)*Math.sin(a);i.beginPath(),i.moveTo(c,d),i.lineTo(e,f),i.lineWidth=2,i.strokeStyle="rgba(0, 0, 0, 0.5)",i.stroke(),i.beginPath(),i.font="bold 12pt Calibri",i.fillText(notes[o].info.name,e,f)}function f(a,b){var c=j+(l-30)*Math.cos(a),d=k+(l-30)*Math.sin(a),e=j+(l+30)*Math.cos(a),f=k+(l+30)*Math.sin(a);i.beginPath(),i.moveTo(c,d),i.lineTo(e,f),i.lineWidth=5,i.strokeStyle="rgba(0, 0, 0, 0.5)",i.stroke(),i.beginPath(),i.font="bold 12pt Calibri",i.fillText(notes[o].info.name,e,f)}b.notes=a.query();var g=c.find("canvas").get(0),h=$(g);g.width=h.parent().width(),g.height=h.parent().width();var i=g.getContext("2d"),j=g.width/2,k=g.height/2,l=Math.round(g.width/8*3);i.beginPath(),i.arc(j,k,l,0,2*Math.PI,!1),i.lineWidth=40,i.strokeStyle="rgba(0, 0, 0, 0.25)",i.stroke();for(var m=360/notes.length*(2*Math.PI)/360,n=-Math.PI/2,o=0;o<notes.length;o++)notes[o].accidental?e(n,notes[o]):f(n,notes[o]),n+=m}}}]);var S=function(){a.apply(this,arguments)};S.prototype=Object.create(a.prototype),S.$inject=a.$inject,S.prototype.name="chord",S.prototype.path="/chords",angular.module("Theory").service("ChordResource",S);var T=function(){a.apply(this,arguments)};T.prototype=Object.create(a.prototype),T.$inject=a.$inject,T.prototype.name="degree",T.prototype.path="/degrees",angular.module("Theory").service("DegreeResource",T);var U=function(){a.apply(this,arguments)};U.prototype=Object.create(a.prototype),U.$inject=a.$inject,U.prototype.name="interval",U.prototype.path="/intervals",angular.module("Theory").service("IntervalResource",U);var V=function(){a.apply(this,arguments)};V.prototype=Object.create(a.prototype),V.$inject=a.$inject,V.prototype.name="note",V.prototype.path="/notes",V.prototype.displayFlat=!1,V.prototype.setElements=function(a){this.elements=a,this.renameNotes()},V.prototype.isDisplayFlat=function(){return this.displayFlat},V.prototype.setDisplayFlat=function(a){a!==this.displayFlat&&(this.displayFlat=a,this.renameNotes())},V.prototype.renameNotes=function(){this.apply(function(a){this.displayFlat?a.info.name=a.info.flat_name:a.info.name=a.info.sharp_name}.bind(this))},V.prototype.getByValue=function(a){return this.elements.find(function(b){return a==b.value})},V.prototype.addSemitone=function(a,b){var c=(a.value+b)%12;return this.getByValue(c)},V.prototype.play=function(){},angular.module("Theory").service("NoteResource",V),angular.module("Theory").config(["$routeProvider",function(a){a.when("/theory",{templateUrl:"../app/Theory/Partial/summary.html"}).when("/theory/intervals",{templateUrl:"../app/Theory/Partial/Interval/index.html",controller:"IntervalListController",controllerAs:"intervalListCtrl",resolve:{entities:["IntervalResource",function(a){return a.query()}]}}).when("/theory/notes",{templateUrl:"../app/Theory/Partial/Note/index.html",controller:"NoteListController",controllerAs:"noteListCtrl",resolve:{entities:["NoteResource",function(a){return a.query()}]}}).when("/theory/degrees",{templateUrl:"../app/Theory/Partial/Degree/index.html",controller:"DegreeListController",controllerAs:"degreeListCtrl",resolve:{entities:["DegreeResource",function(a){return a.query()}]}}).when("/theory/chords",{templateUrl:"../app/Theory/Partial/Chord/index.html",controller:"ChordListController",controllerAs:"chordListCtrl",resolve:{entities:["ChordResource",function(a){return a.query()}]}}).when("/theory/chords/:id",{templateUrl:"../app/Theory/Partial/Chord/show.html",controller:"ChordShowController",controllerAs:"chordShowCtrl",resolve:{entity:["$route","ChordResource",function(a,b){return b.get(a.current.params.id)}],notes:["NoteResource",function(a){return a.query()}]}}).when("/theory/scales",{templateUrl:"../app/Theory/Partial/Scale/index.html",controller:"ScaleListController",controllerAs:"scaleListCtrl",resolve:{entities:["ScaleResource",function(a){return a.query()}]}})}]);var W={};W.en={chord:"chord{COUNT, plural, =0{} one{} other{s}}",chord_count:"{ COUNT } chord{COUNT, plural, =0{} one{} other{s}}",interval_ascending:"Ascending interval",interval_descending:"Descending interval",interval_play:"Play interval",interval_select:"select an interval",note_count:"{ COUNT } note{COUNT, plural, =0{} one{} other{s}}",semitone_count:"{ COUNT } semitone{COUNT, plural, =0{} one{} other{s}}"},W.fr={chord:"accord{COUNT, plural, =0{} one{} other{s}}",chord_count:"{ COUNT } accord{COUNT, plural, =0{} one{} other{s}}",interval_ascending:"Intervalle ascendant",interval_descending:"Intervalle descendant",interval_play:"Jouer l'intervalle",interval_select:"sélectionner un intervalle",note_count:"{ COUNT } note{COUNT, plural, =0{} one{} other{s}}",semitone_count:"{ COUNT } demi-ton{COUNT, plural, =0{} one{} other{s}}"},function(){angular.module("GuitarTuning",[]).directive("tuningEdit",[function(){return{restrict:"E",templateUrl:"",replace:!0,scope:{headstock:"=",strings:"="}}}])}();var X=function(){};angular.module("User").controller("ProfileController",[X]);var Y=function(){};angular.module("User").controller("SettingsController",[Y]),angular.module("User").directive("userMenu",[function(){return{restrict:"E",templateUrl:"../app/User/Partial/menu.html",replace:!0,scope:{},link:function(a,b,c){}}}]),angular.module("User").config(["$routeProvider",function(a){a.when("/users",{templateUrl:"../app/User/Partial/list.html",controller:"ListViewController",controllerAs:"listViewCtrl"}),a.when("/profile",{templateUrl:"../app/User/Partial/profile.html",controller:"ProfileController",controllerAs:"profileCtrl"}),a.when("/profile/settings",{templateUrl:"../app/User/Partial/settings.html",controller:"SettingsController",controllerAs:"settingsCtrl"})}]),angular.module("MusicTools").config(["$routeProvider",function(a){}]);var Z={};Z.en={"link.instrument":"my instruments","link.song_book":"my songbook","link.theory":"theory","link.musician":"musicians","link.advertisement":"advertisement","link.game":"games","link.forum":"forum","link.lesson":"lessons"},Z.fr={"link.instrument":"mes instruments","link.song_book":"my songbook","link.theory":"théorie","link.musician":"musiciens","link.advertisement":"annonces","link.game":"jeux","link.forum":"forum","link.lesson":"cours"}}();