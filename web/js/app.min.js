!function(){"use strict";angular.module("Alert",[]),angular.module("Api",["Client"]).config(["$httpProvider",function(a){a.interceptors.push("ApiErrorInterceptor")}]),angular.module("Client",[]),angular.module("Confirm",[]),angular.module("Layout",["ui.bootstrap"]).config(["$translateProvider",function(a){for(var b in y)y.hasOwnProperty(b)&&a.translations(b,y[b])}]),angular.module("Loader",["ngAnimate"]).config(["$httpProvider",function(a){a.interceptors.push("LoaderInterceptor")}]),angular.module("Utilities",[]),angular.module("AppCore",["ngRoute","ngAnimate","ngSanitize","ngFileUpload","ui.bootstrap","pascalprecht.translate","AppConfiguration","Utilities","Confirm","Api","Client","Layout","Alert"]).config(["$apiProvider","apiConfiguration","$clientProvider","clientConfiguration","$translateProvider",function(a,b,c,d,e){a.configure(b),c.configure(d),e.addInterpolation("$translateMessageFormatInterpolation"),e.preferredLanguage("en"),e.useSanitizeValueStrategy("sanitize")}]);var a=function(a,b){return{restrict:"E",templateUrl:a.getPartial("alerts.html","core/Alert"),replace:!0,controllerAs:"alertsCtrl",controller:["AlertService",function(c){this.alerts=c.getAlerts(),this.removeAlert=function(a){c.removeAlert(a,!0)},this.openDetail=function(c){b.open({templateUrl:a.getPartial("detail.html","core/Alert"),controller:["alert",function(a){this.alert=a}],controllerAs:"detailCtrl",windowClass:"modal-"+c.type,resolve:{alert:function(){return c}}})}}]}};a.$inject=["$client","$uibModal"],angular.module("Alert").directive("alerts",a);var b=function(a){this.$timeout=a};b.$inject=["$timeout"],b.prototype.ERROR_TYPE="danger",b.prototype.SUCCESS_TYPE="sucess",b.prototype.WARNING_TYPE="warning",b.prototype.INFO_TYPE="info",b.prototype.alerts=[],b.prototype.displayDuration=5e3,b.prototype.getAlerts=function(){return this.alerts},b.prototype.addSuccess=function(a,b,c){this.addAlert(this.SUCCESS_TYPE,a,b,c)},b.prototype.addError=function(a,b,c){this.addAlert(this.ERROR_TYPE,a,b,c)},b.prototype.addWarning=function(a,b,c){this.addAlert(this.WARNING_TYPE,a,b,c)},b.prototype.addInfo=function(a,b,c){this.addAlert(this.INFO_TYPE,a,b,c)},b.prototype.addAlert=function(a,b,c,d){var e=angular.merge({type:a,action:c?c:null},b);d&&(e.timeout=this.$timeout(function(){this.removeAlert(e)}.bind(this),this.displayDuration)),this.alerts.push(e)},b.prototype.removeAlert=function(a,b){var c=this.alerts.indexOf(a);if(-1!==c){var d=this.alerts.splice(c,1);d.timeout&&b&&this.$timeout.cancel(d.timeout)}},angular.module("Alert").service("AlertService",b);var c=function(a,b){this.resource=a,this.apiResource=b};c.$inject=["resource","ApiResource"],c.prototype.errors=[],c.prototype.resource=null,c.prototype.isNew=function Ba(){var Ba=!0;return null!==this.resource&&"undefined"!=typeof this.resource.id&&null!==this.resource.id&&0!==this.resource.id.length&&(Ba=!1),Ba},c.prototype.validate=function(){return!0},c.prototype.submit=function(){this.validate()&&(this.isNew()?this.apiResource["new"](this.resource):this.apiResource.update(this.resource))},angular.module("Api").controller("FormController",c);var d=function(a,b,c){this.services={},this.services.$uibModal=a,this.services.$client=b,this.resources=c};d.$inject=["$uibModal","$client","resources"],d.prototype.resources=[],d.prototype.format="detailed",d.prototype.sortBy=null,d.prototype.sortReverse=!1,d.prototype.sortFields={},d.prototype.remove=function(a){var b=this.services.$uibModal.open({templateUrl:this.services.$client.getPartial("Modal/confirm.html","core/Layout"),controller:"ConfirmModalController",windowClass:"modal-danger"});b.result.then(function(a){},function(){})},angular.module("Api").controller("ListController",d);var f=function(a){this.resource=a};f.$inject=["resource"],f.prototype.resource=null,angular.module("Api").controller("ShowController",f);var g=function(a){return function(b){return a.getUpload(b)}};g.$inject=["$api"],angular.module("Api").filter("upload_path",g);var h=function(a,b,c){return{response:function(a){return a},responseError:function(d){switch(d.status>=400&&d.status<500,d.status){case 400:break;case 401:b.path("/login");break;case 403:break;case 404:b.path("/404");break;case 422:c.addWarning({title:"Invalid data."},{},!0);break;case 500:if(console.log(d),d.data&&d.data.errors)for(var e=0;e<d.data.errors.length;e++)c.addError(d.data.errors[e],!1,{label:"RETRY",action:function(){console.log("coucou")}});break;default:b.path("/error_server")}return a.reject(d)}}};h.$inject=["$q","$location","AlertService"],angular.module("Api").service("ApiErrorInterceptor",h);var i=function(){this.$get=function(){var a=this;return{config:{serverName:a.serverName,basePath:a.basePath,uploadPath:a.uploadPath},getUrl:function(b){return a.getUrl(b)},getUpload:function(b){return a.getUpload(b)}}}};i.$inject=[],i.prototype.protocol="http:",i.prototype.host="localhost",i.prototype.port=80,i.prototype.serverName=null,i.prototype.basePath=null,i.prototype.uploadPath=null,i.prototype.configure=function(a){a.protocol&&(this.protocol=a.protocol.replace(/^\/+|\/+$/g,"")),a.host&&(this.host=a.host.replace(/^\/+|\/+$/g,"")),a.port&&(this.port=a.port),a.basePath&&(this.basePath=a.basePath.replace(/^\/+|\/+$/g,"")),a.uploadPath&&(this.uploadPath=a.uploadPath.replace(/^\/+|\/+$/g,"")),this.generateServerName()},i.prototype.generateServerName=function(){var a="";this.protocol&&(a+=this.protocol),a+="//",this.host?a+=this.host:console.error("$apiProvider : API host can not be empty."),this.port&&(a+=":"+this.port),this.serverName=a},i.prototype.getUrl=function(a){return this.serverName||console.error("$apiProvider : You must configure the provider before calling `getUrl`."),this.serverName+"/"+this.basePath+"/"+a.replace(/^\/+|\/+$/g,"")},i.prototype.getUpload=function(a){return this.serverName||console.error("$apiProvider : You must configure the provider before calling `getUpload`."),this.serverName+"/"+this.uploadPath+"/"+a.replace(/^\/+|\/+$/g,"")},angular.module("Api").provider("$api",i);var j=function(a,b){this.$routeProvider=a,this.$clientProvider=b,this.$get=a.$get};j.$inject=["$routeProvider","$clientProvider"],j.prototype["default"]={},j.prototype["default"].resourceName="{resource}Resource",j.prototype["default"].options={list:{templateUrl:"{resource}/index.html",controller:"{resource}ListController",controllerAs:"listCtrl"},show:{templateUrl:"{resource}/show.html",controller:"{resource}ShowController",controllerAs:"showCtrl"},"new":{templateUrl:"{resource}/form.html",controller:"{resource}FormController",controllerAs:"formCtrl"},edit:{templateUrl:"{resource}/form.html",controller:"{resource}FormController",controllerAs:"formCtrl"}},j.prototype.register=function(a,b,c,d,e){var f={};angular.merge(f,this["default"].options),angular.isObject(e)&&angular.merge(f,e),c&&0!==c.length?"/"!==c.charAt(0)&&(c="/"+c):c="";var g=this.setPlaceholders(this["default"].resourceName,a,b),h=this.$clientProvider.getPartial(this.setPlaceholders(f.list.templateUrl,a,b),"app/"+a),i=this.setPlaceholders(f.list.controller,a,b),j=this.setPlaceholders(f.list.controllerAs,a,b),k={resources:[g,function(a){return a.query()}]};if(angular.isObject(f.list.resolve)&&angular.merge(k,f.list.resolve),this.$routeProvider.when(c,{templateUrl:h,controller:i,controllerAs:j,resolve:k}),!d){var l=this.$clientProvider.getPartial(this.setPlaceholders(f["new"].templateUrl,a,b),"app/"+a),m=this.setPlaceholders(f["new"].controller,a,b),n=this.setPlaceholders(f["new"].controllerAs,a,b),o={resource:[g,function(a){return a.init()}]};angular.isObject(f["new"].resolve)&&angular.merge(o,f["new"].resolve),this.$routeProvider.when(c+"/new",{templateUrl:l,controller:m,controllerAs:n,resolve:o});var p=this.$clientProvider.getPartial(this.setPlaceholders(f.edit.templateUrl,a,b),"app/"+a),q=this.setPlaceholders(f.edit.controller,a,b),r=this.setPlaceholders(f.edit.controllerAs,a,b),s={resource:["$route",g,function(a,b){return b.get({id:a.current.params.id})}]};angular.isObject(f.edit.resolve)&&angular.merge(s,f.edit.resolve),this.$routeProvider.when(c+"/:id/edit",{templateUrl:p,controller:q,controllerAs:r,resolve:s})}var t=this.$clientProvider.getPartial(this.setPlaceholders(f.show.templateUrl,a,b),"app/"+a),u=this.setPlaceholders(f.show.controller,a,b),v=this.setPlaceholders(f.show.controllerAs,a,b),w={resource:["$route",g,function(a,b){return b.get({id:a.current.params.id})}]};angular.isObject(f.show.resolve)&&angular.merge(w,f.show.resolve),this.$routeProvider.when(c+"/:id",{templateUrl:t,controller:u,controllerAs:v,resolve:w})},j.prototype.setPlaceholders=function(a,b,c){return a.replace("{module}",b).replace("{resource}",c)},angular.module("Api").provider("apiResourceRoute",j);var k=function(a,b,c,d,e){this.services.$http=a,this.services.$cacheFactory=b,this.services.$q=c,this.services.$api=d,this.services.AlertService=e,null===this.type&&console.error("An ApiResource must have a property `type`."),null===this.path&&console.error("An ApiResource must have a property `path`.")};k.$inject=["$http","$cacheFactory","$q","$api","AlertService"],k.prototype.services={},k.prototype.type=null,k.prototype.path=null,k.prototype.forceReload=!1,k.prototype.init=function(){return{id:null,type:this.type,attributes:{},relationships:{}}},k.prototype.hasRelationship=function(a,b){return!!(angular.isObject(a.relationships)&&angular.isObject(a.relationships[b])&&angular.isObject(a.relationships[b].data)&&0!==angular.isObject(a.relationships[b].data.length))},k.prototype.getRelationship=function(a,b){var c=null;return this.hasRelationship(a,b)&&(c=a.relationships[b].data),c},k.prototype.addRelationship=function(a,b,c,d){angular.isObject(a.relationships)||(a.relationships={}),this.hasRelationship(a,b)||(a.relationships[b]={data:d?[]:{}}),d?a.relationships[b].data.push(c):a.relationships[b].data=c},k.prototype.removeRelationship=function(a,b,c){this.hasRelationship(a,b)&&a.relationships[b].data instanceof Array},k.prototype.query=function(a){var b=this.services.$q.defer(),c=this.getFullPath(a),d=this.getRequest(c);if(this.forceReload){var e=this.services.$cacheFactory.get("$http");e.remove(c)}return this.services.$http(d).then(function(a){var c=a.data.data?a.data.data:[];this.forceReload=!1,b.resolve(c)}.bind(this),function(a){b.reject(a)}),b.promise},k.prototype.get=function(a){var b=this.services.$q.defer(),c=this.getRequest(this.getFullPath(a));return this.services.$http(c).then(function(a){var c=a.data.data?a.data.data:{};b.resolve(c)},function(a){b.reject(a)}),b.promise},k.prototype["new"]=function(a){var b=this.services.$q.defer(),c=this.getRequest(this.getFullPath(a),"POST",a);return this.services.$http(c).then(function(c){this.forceReload=!0,angular.copy(c.data.data,a),this.services.AlertService.addSuccess({title:"Entity created"},{},!0),b.resolve(c.data)}.bind(this),function(a){b.reject(a)}),b.promise},k.prototype.update=function(a){var b=this.services.$q.defer(),c=this.getRequest(this.getFullPath(a),"PUT",a);return this.services.$http(c).then(function(a){b.resolve(a.data)},function(a){b.reject(a)}),b.promise},k.prototype.remove=function(a){var b=this.services.$q.defer(),c=this.getRequest(this.getFullPath(a),"DELETE",a);return this.services.$http(c).then(function(a){this.forceReload=!0,b.resolve(a)}.bind(this),function(a){b.reject(a)}),b.promise},k.prototype.getFullPath=function(a){var b=this.services.$api.getUrl(this.path),c=this.path.match(/{([^}]+)}/gi);if(c)for(var d=0;d<c.length;d++){var e=c[d].replace("{","").replace("}",""),f="";a&&a.hasOwnProperty(e)&&null!=a[e]&&(f=a[e]),b=b.replace(c[d],f)}for(;"/"===b.substr(-1);)b=b.substr(0,b.length-1);return b},k.prototype.getRequest=function(a,b,c){var d={};return d.url=a,d.method=b?b:"GET",d.data=c?{data:c}:null,d.cache=!0,d.headers={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"},d},angular.module("Api").service("ApiResource",k);var l=function(a){return function(b){return a.getAsset(b)}};l.$inject=["$client"],angular.module("Client").filter("asset_path",l);var m=function(a){return function(b,c){return a.getPartial(b,c)}};m.$inject=["$client"],angular.module("Client").filter("partial_path",m);var n=function(){this.$get=function(){var a=this;return{config:{basePath:a.basePath,srcDir:a.srcDir,assetDir:a.assetDir,partialDir:a.partialDir},getAsset:function(b){return a.getAsset(b)},getPartial:function(b,c){return a.getPartial(b,c)}}}};n.$inject=[],n.prototype.basePath=null,n.prototype.srcDir="html",n.prototype.assetDir="",n.prototype.partialDir="Partial",n.prototype.configure=function(a){a.basePath&&(this.basePath=a.basePath.replace(/\/+$/,"")),a.srcDir&&(this.srcDir=a.srcDir.replace(/^\/+|\/+$/g,"")),a.assetDir&&(this.assetDir=a.assetDir.replace(/^\/+|\/+$/g,"")),a.partialDir&&(this.partialDir=a.partialDir.replace(/^\/+|\/+$/g,""))},n.prototype.getAsset=function(a){return this.basePath+"/"+this.assetDir+"/"+a.replace(/^\/+|\/+$/g,"")},n.prototype.getPartial=function(a,b){return this.basePath+"/"+this.srcDir+"/"+b+"/"+this.partialDir+"/"+a.replace(/^\/+|\/+$/g,"")},angular.module("Client").provider("$client",n);var o=function(a){this.instance=a};o.$inject=["$uibModalInstance"],angular.module("Confirm").controller("ConfirmModalController",o);var p=function(a,b){return this.services={},this.services.$uibModal=a,this.services.$client=b,{}};p.$inject=["$uibModal","$client"],angular.module("Confirm").directive("confirm",p);var q=function(a,b){this.services={},this.services.$uibModal=a,this.services.$client=b};q.$inject=[],q.prototype.confirm=function(){this.services.$uibModal.open({templateUrl:this.services.$client.getPartial("confirm.html","core/Confirm"),controller:"ConfirmModalController",windowClass:"modal-danger"})},angular.module("Confirm").service("ConfirmService",q),angular.module("Layout").directive("scoreField",["$client",function(a){return{restrict:"E",templateUrl:a.getPartial("Field/score-field.html","core/Layout"),replace:!0,scope:{model:"=",name:"@",icon:"@",editable:"@",min:"@",max:"@",step:"@"},controllerAs:"scoreFieldCtrl",bindToController:!0,controller:function(){var a={editable:!1,step:1,min:0,max:10,icon:"fa fa-star"};for(var b in a)a.hasOwnProperty(b)&&void 0==this[b]&&(this[b]=a[b]);null==this.model&&(this.model=this.min),this.values=[];for(var c=this.min+1;c<=this.max;c+=this.step)this.values.push(c)}}}]);var r=function(a){return{restrict:"E",template:'<a class="flag flag-{{ flagCtrl.type }}" role="button" href="" data-ng-transclude="" data-ng-click="flagCtrl.toggle()" data-ng-class="{ on: flagCtrl.value }"></a>',replace:!0,transclude:!0,scope:{value:"=",type:"@?"},controllerAs:"flagCtrl",bindToController:!0,controller:function(){this.value=!1,this.type="default",this.toggle=function(){this.value=!this.value}}}};r.$inject=[],angular.module("Layout").directive("uiFlag",r),angular.module("Layout").directive("uiHeaderButton",[function(){return{restrict:"E",template:'<li role="presentation" data-ng-transclude=""></li>',replace:!0,transclude:!0,scope:{},link:function(a,b,c){}}}]),angular.module("Layout").directive("uiHeaderButtons",[function(){return{restrict:"E",template:'<nav class="ui-header-buttons navbar navbar-default"><ul class=" nav navbar-nav" data-ng-transclude=""></ul></nav>',replace:!0,transclude:!0,scope:{},link:function(a,b,c){}}}]),angular.module("Layout").directive("uiHeader",["$client",function(a){return{restrict:"E",templateUrl:a.getPartial("Header/navbar.html","core/Layout"),replace:!0,scope:{},link:function(a,b,c){}}}]);var s=function(a){return{restrict:"E",templateUrl:a.getPartial("list-formatter.html","core/Layout"),replace:!0,scope:{format:"="},controllerAs:"listFormatterCtrl",bindToController:!0,controller:function(){this.switchFormat=function(a){this.format=a}}}};s.$inject=["$client"],angular.module("Layout").directive("layoutListFormatter",s);var t=function(a){return{restrict:"E",templateUrl:a.getPartial("list-sorter.html","core/Layout"),replace:!0,scope:{count:"=",element:"@",current:"=",reverse:"=",fields:"="},controllerAs:"listSorterCtrl",bindToController:!0,controller:function(){this.getSortType=function(){var a=null;switch(this.fields[this.current]){case"string":a="string";break;case"number":a="number"}return a},this.setCurrent=function(a){this.current=a},this.toggleReverse=function(){this.reverse=!this.reverse}}}};t.$inject=["$client"],angular.module("Layout").directive("layoutListSorter",t);var u=function(){return{restrict:"E",template:'<div class="container-fluid" data-ng-transclude=""></div>',replace:!0,transclude:!0}};u.$inject=[],angular.module("Layout").directive("layoutPage",u);var v=function(a){return{restrict:"E",templateUrl:a.getPartial("Page/title.html","core/Layout"),replace:!0,transclude:!0,scope:{hideTitle:"@"}}};v.$inject=["$client"],angular.module("Layout").directive("layoutPageTitle",v),angular.module("Layout").directive("layoutScrollable",["$document",function(a){var b={scrollInertia:100,scrollButtons:{enable:!1},scrollAmount:80,axis:"y",contentTouchScroll:!0,autoHideScrollbar:!1};return{restrict:"A",replace:!0,transclude:!0,template:'<div class="scrollable" data-ng-transclude=""></div>',scope:{options:"=layoutScrollableOptions"},link:function(c,d){function f(){g.ready(function(){g.mCustomScrollbar(b)}),$(window).on("resize",function(){g.mCustomScrollbar("update")}),a.on("hover",g,function(){a.data({"keyboard-input":"enabled"}),$(this).addClass("keyboard-input")}),a.on("mouseout",g,function(){a.data({"keyboard-input":"disabled"}),$(this).removeClass("keyboard-input")}),a.on("keydown",function(){if("enabled"===$(this).data("keyboard-input")){var a=$(".keyboard-input"),b=parseFloat($(".keyboard-input .mCSB_container").position().top),c=Math.abs(b),d=80;38===e.which?(e.preventDefault(),d>c?a.mCustomScrollbar("scrollTo","top"):a.mCustomScrollbar("scrollTo",c-d,{scrollInertia:400,scrollEasing:"easeOutCirc"})):40===e.which&&(e.preventDefault(),a.mCustomScrollbar("scrollTo",c+d,{scrollInertia:400,scrollEasing:"easeOutCirc"}))}})}c.options&&angular.extend(b,c.options);var g=$(d);f()}}}]);var w=function(a,b){return{restrict:"E",templateUrl:b.getPartial("Sidebar/sidebar.html","core/Layout"),replace:!0,scope:{},link:function(b,c,d){b.currentPath=a.path(),b.$on("$locationChangeSuccess",function(){b.currentPath=a.path()})}}};w.$inject=["$location","$client"],angular.module("Layout").directive("layoutSidebar",w);var x=function(a){return{restrict:"E",templateUrl:a.getPartial("Sidebar/sidebar-item.html","core/Layout"),replace:!0,scope:{icon:"@",label:"@",url:"@",currentPath:"="},link:function(a,b,c){a.$watch("currentPath",function(){a.current=a.currentPath&&0===a.currentPath.indexOf(a.url)})}}};x.$inject=["$client"],angular.module("Layout").directive("layoutSidebarItem",x);var y={};y.en={list_display_tile:"tiles",list_display_list_detailed:"detailed list",list_display_list_condensed:"condensed list"},y.fr={list_display_tile:"tuiles",list_display_list_detailed:"liste détaillée",list_display_list_condensed:"liste condensée"};var z=function(a,b,c){this.services={},this.services.$q=a,this.services.$timeout=b,this.services.$loader=c};z.$inject=["$q","$timeout","$loader"],z.prototype.total=0,z.prototype.completed=0,z.prototype.request=function(a){return this.startRequest(),a},z.prototype.response=function(a){return this.completeRequest(),a},z.prototype.responseError=function(a){return this.completeRequest(),this.services.$q.reject(a)},z.prototype.startRequest=function(){0===this.total&&this.services.$timeout(this.startLoader.bind(this),this.services.$loader.latencyThreshold),this.total++,this.services.$loader.updateProgress(this.completed/this.total)},z.prototype.startLoader=function(){this.services.$loader.start()},z.prototype.completeRequest=function(){this.completed++,this.completed>=this.total?(this.services.$timeout.cancel(this.startLoader.bind(this)),this.services.$loader.complete(),this.completed=0,this.total=0):this.services.$loader.updateProgress(this.completed/this.total)},angular.module("Loader").service("LoaderInterceptor",z);var A=function(a,b,c){this.services={},this.services.$document=a,this.services.$animate=b,this.services.$timeout=c,this.$get=function(){var a=this,b=angular.element(this.template);b.find("div").eq(0);return{start:a.start,progress:progress.updateProgress,status:a.status,complete:a.complete,latencyThreshold:a.latencyThreshold,parentSelector:a.parentSelector,startSize:a.startSize}}};A.$inject=["$document","$animate","$timeout"],A.prototype.started=!1,A.prototype.status=0,A.prototype.latencyThreshold=100,A.prototype.startSize=.02,A.prototype.parentSelector="body",A.prototype.template='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',A.prototype.start=function(){var a=this.services.$document.find(this.parentSelector).eq(0);if(this.services.$timeout.cancel(completeTimeout),!this.started){this.started=!0;var b=angular.element(this.template);$animate.enter(b,a,angular.element(a[0].lastChild)),this.updateProgress(this.startSize)}},A.prototype.updateProgress=function(a){if(this.started){var b=100*a+"%";loadingBar.css("width",b),this.status=a,this.services.$timeout.cancel(incTimeout),incTimeout=$timeout(function(){_inc()}.bind(this),250)}},A.prototype.complete=function(){function a(){status=0,started=!1}this.updateProgress(1),$timeout.cancel(completeTimeout),completeTimeout=$timeout(function(){a()},500)},angular.module("Loader").provider("$loader",A);var B=function(){};B.prototype.context=null,B.prototype.playFrequency=function(a,b,c){var d=new(window.AudioContext||window.webkitAudioContext),e=d.createOscillator();return e.type="sine",e.frequency.value=a,e.connect(d.destination),e.start(b),e.stop(b+c),e},angular.module("Utilities").service("SoundService",[B]),angular.module("Advertisement",[]),angular.module("Badge",[]),angular.module("Forum",[]),angular.module("Game",[]),angular.module("GuitarNeck",[]),angular.module("Instrument",["Utilities","Tuning"]).config(["$translateProvider",function(a){for(var b in S)S.hasOwnProperty(b)&&a.translations(b,S[b])}]),angular.module("Lesson",["ui.tinymce"]).value("uiTinymceConfig",{statusbar:!1,elementpath:!1,menubar:!1,plugins:["link","image","table","code"],toolbar:"undo redo | styleselect | bold italic underline | bullist numlist table | alignleft aligncenter alignright alignjustify | indent outdent | link unlink | image | code"}).config(["$translateProvider",function(a){for(var b in W)W.hasOwnProperty(b)&&a.translations(b,W[b])}]),angular.module("SheetMusic",[]),angular.module("SongBook",["ngFileUpload","Utilities"]).config(["$translateProvider",function(a){for(var b in ca)ca.hasOwnProperty(b)&&a.translations(b,ca[b])}]),angular.module("Theory",["ngRoute","SheetMusic"]).config(["$translateProvider",function(a){for(var b in ta)ta.hasOwnProperty(b)&&a.translations(b,ta[b])}]),angular.module("Tuning",[]).config(["$translateProvider",function(a){for(var b in xa)xa.hasOwnProperty(b)&&a.translations(b,xa[b])}]),angular.module("User",[]),angular.module("App",["AppConfiguration","AppCore","Advertisement","Badge","Forum","Game","Instrument","GuitarNeck","Lesson","SongBook","Theory","Tuning","User"]).config(["$translateProvider",function(a){for(var b in Aa)Aa.hasOwnProperty(b)&&a.translations(b,Aa[b])}]),angular.module("Advertisement").config(["$routeProvider",function(a){}]),angular.module("Badge").config(["$routeProvider",function(a){}]),angular.module("Forum").config(["$routeProvider",function(a){}]);var C=function(a,b){d.apply(this,arguments)};C.prototype=Object.create(d.prototype),C.$inject=d.$inject,C.prototype.sortBy="name",C.prototype.sortFields={name:"string"},angular.module("Game").controller("GameListController",C);var D=function(){k.apply(this,arguments)};D.prototype=Object.create(k.prototype),D.prototype.constructor=D,D.$inject=k.$inject,D.prototype.type="game",D.prototype.path="/games/{id}",angular.module("Game").service("GameResource",D),angular.module("Game").config(["apiResourceRouteProvider",function(a){a.register("Game","Game","games",!0)}]);var E=function(){};E.prototype.height=300,angular.module("GuitarNeck").controller("GuitarNeckController",E);var F=function(){return this};F.prototype.renderOptions={width:null,height:null,color:{font:"#161616","default":"#303030",highlight:"#444444"}},F.prototype.redraw=function(a,b,c){console.log("Abstract Layer is redrawn."),this.renderOptions.width=b,this.renderOptions.height=c;var d=a.getContext("2d");return null!==d&&(a.width=this.renderOptions.width,a.height=this.renderOptions.height),this},angular.module("GuitarNeck").controller("AbstractLayerController",F);var G=function(){return F.apply(this,arguments),this};G.prototype=Object.create(F.prototype),G.prototype.constructor=F,G.prototype.renderOptions.references={display:!0,highlight:!0,dotSize:10},G.prototype.renderOptions.numbers={display:!0,size:30,font:{size:12,weight:"bold",family:'"Helvetica Neue",Helvetica,Arial,sans-serif'}},G.prototype.fretFirst=0,G.prototype.fretLast=24,G.prototype.fretCount=24,G.prototype.redraw=function(a,b,c){console.log("Fret Layer is redrawn."),F.prototype.redraw.apply(this,arguments);var d=a.getContext("2d");return null!==d&&this.drawFrets(d),this},G.prototype.drawFrets=function(a){for(var b=15,c=(this.renderOptions.width-30)/(this.fretLast-this.fretFirst),d=this.fretFirst;d<=this.fretLast;d++){var e=this.fretIsHighlighted(d);e&&this.renderOptions.references.display&&this.drawFretReference(a,b-c/2,d),this.drawFret(a,b,d,e),b+=c}return this},G.prototype.fretIsHighlighted=function(a){var b=!1;if(this.renderOptions.references.highlight)if(0!==a&&a%12==0)b=!0;else{var c=a%12;13!==a&&10>c&&c%2!=0&&(b=!0)}return b},G.prototype.drawFret=function(a,b,c,d){a.beginPath();var e=3;this.renderOptions.references.highlight&&(0==c?e=9:d&&(e=5));var f=this.renderOptions.color["default"];d&&(f=this.renderOptions.color.highlight),0===b/.5%2&&(b+=.5);var g=this.renderOptions.height;return this.renderOptions.references.display&&(g-=2*this.renderOptions.references.dotSize),a.moveTo(b,0),a.lineTo(b,g),a.lineWidth=e,a.strokeStyle=f,a.closePath(),a.stroke(),this.renderOptions.numbers.display&&this.fretFirst!==c&&this.fretLast!==c&&this.drawFretNumber(a,b,c,d),this},G.prototype.drawFretNumber=function(a,b,c,d){var e=0,f=this.renderOptions.color["default"];return d&&(f=this.renderOptions.color.highlight),a.beginPath(),a.fillStyle=f,a.rect(b-this.renderOptions.numbers.size/2,e,this.renderOptions.numbers.size,this.renderOptions.numbers.size),a.closePath(),a.fill(),a.beginPath(),a.font=this.renderOptions.numbers.font.weight+" "+this.renderOptions.numbers.font.size+"px "+this.renderOptions.numbers.font.family,a.fillStyle=this.renderOptions.color.font,a.textAlign="center",a.shadowColor="transparent",a.textBaseline="middle",a.closePath(),a.fillText(c,b,e+this.renderOptions.numbers.size/2),this},G.prototype.drawFretReference=function(a,b,c){var d=!1;0===c%12&&(d=!0),a.beginPath(),a.fillStyle=this.renderOptions.color.highlight;var e=this.renderOptions.height-this.renderOptions.references.dotSize;return d?(a.arc(b+this.renderOptions.references.dotSize,e,this.renderOptions.references.dotSize/2,0,2*Math.PI,!1),a.arc(b-this.renderOptions.references.dotSize,e,this.renderOptions.references.dotSize/2,0,2*Math.PI,!1)):a.arc(b,e,this.renderOptions.references.dotSize/2,0,2*Math.PI,!1),a.closePath(),a.fill(),this},angular.module("GuitarNeck").controller("FretLayerController",G);var H=function(){return F.apply(this,arguments),this};H.prototype=Object.create(F.prototype),H.prototype.constructor=H,H.prototype.redraw=function(a,b,c){return console.log("Note Layer is redrawn."),this},angular.module("GuitarNeck").controller("NoteLayerController",H);var I=function(){return F.apply(this,arguments),this};I.prototype=Object.create(F.prototype),I.prototype.constructor=I,I.prototype.redraw=function(a,b,c){console.log("String Layer is redrawn."),F.prototype.redraw.apply(this,arguments);var d=a.getContext("2d");return null!==d&&this.drawStrings(d),this},I.prototype.drawStrings=function(a){return this},I.prototype.drawString=function(a,b){var c=this.notes.get(b),d=this.getStringPosition(a),e=.5*(a+1)+.5;this.context.beginPath(),this.context.moveTo(0,d),this.context.lineTo(this.width,d),this.context.lineWidth=e,this.context.strokeStyle=this.renderOptions.stringColor,this.context.shadowColor="#000",this.context.shadowBlur=4,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.closePath(),this.context.stroke(),this.drawNote((this.renderOptions.notes.size+2)/2,d,c,this.renderOptions.notes.size,this.renderOptions.notes.defaultColor,this.renderOptions.notes.defaultFill,"#dddddd")},I.prototype.getStringPosition=function(a){var b=this.height.strings.interval*a+.5+this.height.strings.offset;return this.frets.showNumber&&(b+=this.renderOptions.fretNumberSize),b},angular.module("GuitarNeck").controller("StringLayerController",I),angular.module("GuitarNeck").directive("guitarNeckWidget",["$client",function(a){return{restrict:"E",templateUrl:a.getPartial("GuitarNeck.html","app/GuitarNeck"),replace:!0,scope:{guitar:"=?"},controller:"GuitarNeckController",controllerAs:"guitarNeckCtrl",bindToController:!0,link:function(a,b,c){}}}]),angular.module("GuitarNeck").directive("fretLayer",["$window","$client",function(a,b){return{restrict:"E",templateUrl:b.getPartial("Layer/FretLayer.html","app/GuitarNeck"),replace:!0,scope:{fretFirst:"@",fretLast:"@",fretCount:"@"},controller:"FretLayerController",controllerAs:"fretLayerCtrl",bindToController:!0,link:function(b,c,d,e){var f=c.find("canvas").get(0);e.redraw(f,c.width(),c.height()),b.$watch(function(){return e.fretFirst},function(a,b){a!=b&&e.redraw(f,c.width(),c.height())}),b.$watch(function(){return e.fretLast},function(a,b){a!=b&&e.redraw(f,c.width(),c.height())}),b.$watch(function(){return e.fretCount},function(a,b){a!=b&&e.redraw(f,c.width(),c.height())}),$(a).on("resize",function(a){e.redraw(f,c.width(),c.height())})}}}]),angular.module("GuitarNeck").directive("noteLayer",["$window","$client",function(a,b){return{restrict:"E",templateUrl:b.getPartial("Layer/NoteLayer.html","app/GuitarNeck"),replace:!0,scope:{},controller:"NoteLayerController",controllerAs:"noteLayerCtrl",bindToController:!0,link:function(b,c,d,e){e.redraw(),$(a).on("resize",function(a){e.redraw()})}}}]),angular.module("GuitarNeck").directive("stringLayer",["$window","$client",function(a,b){return{restrict:"E",templateUrl:b.getPartial("Layer/StringLayer.html","app/GuitarNeck"),replace:!0,scope:{strings:"=?"},controller:"StringLayerController",controllerAs:"stringLayerCtrl",bindToController:!0,link:function(b,c,d,e){var f=c.get(0);e.redraw(f,c.width(),c.height()),$(a).on("resize",function(a){e.redraw(f,c.width(),c.height())})}}}]);var J=function(a,b,d,e,f){c.apply(this,arguments),this.instrumentTypes=d,this.templateResource=e,this.specificationResource=f,this.apiResource.hasRelationship(this.resource,"instrumentType")||this.setType(this.instrumentTypes[0]),this.apiResource.hasRelationship(this.resource,"specification")||this.apiResource.addRelationship(this.resource,"specification",this.specificationResource.init())};J.prototype=Object.create(c.prototype),J.prototype.constructor=J,J.$inject=["resource","InstrumentResource","instrumentTypes","InstrumentTemplateResource","InstrumentSpecificationResource"],J.prototype.templates=[],J.prototype.selectedTemplate=null,J.prototype.setType=function(a){this.apiResource.addRelationship(this.resource,"instrumentType",a),this.loadTemplates(a)},J.prototype.loadTemplates=function(a){this.templates=this.templateResource.get({type:a.id}).then(function(a){this.templates=a}.bind(this))},J.prototype.selectTemplate=function(a){this.selectedTemplate=a,this.resource.attributes.name||(this.resource.attributes.name=a.attributes.name),this.apiResource.hasRelationship(this.resource,"specification")||this.apiResource.addRelationship(this.resource,"specification",{});var b=this.apiResource.getRelationship(this.resource,"specification");for(var c in a.attributes)"name"!==c&&a.attributes.hasOwnProperty(c)&&(b.attributes[c]=a.attributes[c]);
},angular.module("Instrument").controller("InstrumentFormController",J);var K=function(a,b){d.apply(this,arguments)};K.prototype=Object.create(d.prototype),K.$inject=d.$inject,K.prototype.sortBy="name",K.prototype.sortFields={name:"string"},angular.module("Instrument").controller("InstrumentListController",K);var L=function(a){f.apply(this,arguments)};L.prototype=Object.create(f.prototype),L.$inject=f.$inject,L.prototype.resource=null,angular.module("Instrument").controller("InstrumentShowController",L);var M=function(a){return{restrict:"E",templateUrl:a.getPartial("Instrument/menu.html","app/Instrument"),replace:!0}};M.$inject=["$client"],angular.module("Instrument").directive("instrumentMenu",M);var N=function(a){return{restrict:"E",template:"<div></div>",replace:!0,scope:{type:"=",specification:"="},bindToController:!0,controllerAs:"specificationFormCtrl",controller:[function(){}]}};N.$inject=["$client"],angular.module("Instrument").directive("instrumentSpecificationForm",N);var O=function(){k.apply(this,arguments)};O.prototype=Object.create(k.prototype),O.$inject=k.$inject,O.prototype.type="instruments",O.prototype.path="/instruments/{id}",angular.module("Instrument").service("InstrumentResource",O);var P=function(){k.apply(this,arguments)};P.prototype=Object.create(k.prototype),P.prototype.constructor=P,P.$inject=k.$inject,P.prototype.type="instrument_specifications",P.prototype.path="/instrument/{instrument}/specification/{id}",angular.module("Instrument").service("InstrumentSpecificationResource",P);var Q=function(){k.apply(this,arguments)};Q.prototype=Object.create(k.prototype),Q.prototype.constructor=Q,Q.$inject=k.$inject,Q.prototype.type="instrument_templates",Q.prototype.path="/instrument_types/{type}/templates/{id}",angular.module("Instrument").service("InstrumentTemplateResource",Q);var R=function(){k.apply(this,arguments)};R.prototype=Object.create(k.prototype),R.prototype.constructor=R,R.$inject=k.$inject,R.prototype.type="instrument_types",R.prototype.path="/instrument_types/{id}",angular.module("Instrument").service("InstrumentTypeResource",R),angular.module("Instrument").config(["apiResourceRouteProvider",function(a){a.register("Instrument","Instrument","instruments",!1,{"new":{resolve:{instrumentTypes:["InstrumentTypeResource",function(a){return a.query()}]}},edit:{resolve:{instrumentTypes:["InstrumentTypeResource",function(a){return a.query()}]}}})}]);var S={};S.en={create_choose_template:"Choose a preconfigured model (optional)",create_choose_type:"Choose the type of the Instrument you want to create",create_fill_info:"Fill information",delete_instrument:"Delete instrument",edit_instrument:"Edit instrument",instrument:"instrument{COUNT, plural, =0{} one{} other{s}}",my_instruments_title:"My instruments",new_instrument:"Add a new instrument",no_instrument_found:"No instrument found.",show_instrument:"Show instrument"},S.fr={create_choose_template:"Choisir un modèle (optionnel)",create_choose_type:"Choisir le type d'instrument à créer",create_fill_info:"Saisir les informations à propos de l'instrument",delete_instrument:"Supprimer l'instrument",edit_instrument:"Modifier l'instrument",instrument:"instrument{COUNT, plural, =0{} one{} other{s}}",my_instruments_title:"Mes instruments",new_instrument:"Ajouter un instrument",no_instrument_found:"Aucun instrument trouvé.",show_instrument:"Voir l'instrument"};var T=function(a,b){c.apply(this,arguments)};T.prototype=Object.create(c.prototype),T.prototype.constructor=T,T.$inject=["resource","LessonResource"],T.prototype.view="info",T.prototype.changeView=function(a){-1!==["info","section","summary"].indexOf(a)&&(this.view=a)},T.prototype.addSection=function(){"undefined"==typeof this.resource.sections&&(this.resource.sections=[]),this.resource.sections.push({name:"Title of the Section"})},angular.module("Lesson").controller("LessonFormController",T);var U=function(a,b){d.apply(this,arguments)};U.prototype=Object.create(d.prototype),U.$inject=d.$inject,U.prototype.sortBy="name",U.prototype.sortFields={name:"string"},angular.module("Lesson").controller("LessonListController",U);var V=function(a,b,c){k.apply(this,arguments)};V.prototype=Object.create(k.prototype),V.prototype.constructor=V,V.$inject=k.$inject,V.prototype.type="lessons",V.prototype.path="/lessons/{id}",angular.module("Lesson").service("LessonResource",V),angular.module("Lesson").config(["apiResourceRouteProvider",function(a){a.register("Lesson","Lesson","lessons",!1)}]);var W={};W.en={delete_lesson:"Delete lesson",edit_lesson:"Edit lesson",lesson_title:"Lessons",new_lesson:"Add a new lesson",no_lesson_found:"No lesson found.",lesson_song:"Show lesson",lesson:"lesson{COUNT, plural, =0{} one{} other{s}}"},W.fr={delete_lesson:"Supprimer le cours",edit_lesson:"Modifier le cours",lesson_title:"Cours",new_lesson:"Ajouter un cours",no_lesson_found:"Aucun cours trouvé.",show_lesson:"Voir le cours",lesson:"cours{COUNT, plural, =0{} one{} other{}}"};var X=function(){};X.$inject=[],X.prototype.file=null,X.prototype.component={},X.prototype.player={ready:!1,state:0,component:{}},X.prototype.play=function(){this.player.component.Play()},X.prototype.pause=function(){this.player.component.Pause()},X.prototype.previousBar=function(){},X.prototype.nextBar=function(){},angular.module("SheetMusic").controller("SheetMusicController",X);var Y=function(a){return{restrict:"E",replace:!0,template:'<div class="chordTab"></div>',scope:{root:"=",chord:"="},link:function(b,c,d){a(function(){var a=":1 (3.4 3.5)",b=$(c);b.alphaTab({staves:["score","tab"],layout:{mode:"horizontal",additionalSettings:{hideInfo:!0,hideBarCount:!0}}}),b.alphaTab("tex",a)},0)}}};Y.$inject=["$timeout"],angular.module("SheetMusic").directive("chordSheet",Y),function(){angular.module("SheetMusic").directive("sheetMusic",["$timeout","$client",function(a,b){return{restrict:"E",templateUrl:b.getPartial("sheet-music.html","app/SheetMusic"),replace:!0,scope:{file:"@"},bindToController:!0,controller:"SheetMusicController",controllerAs:"sheetMusicCtrl",link:function(b,c,d,e){e.component=$(".alphaTab");var f=$(c),g=f.offset(),h=f.width(),i=f.find(".sheet-music-controls");i.offset({left:g.left}),i.width(h),a(function(){e.component.alphaTab()},300)}}}])}();var Z=function(a,b,d){c.apply(this,arguments),this.upload=d};Z.prototype=Object.create(c.prototype),Z.prototype.constructor=Z,Z.$inject=["resource","SongResource","Upload"],Z.prototype.selectCover=function(a){this.resource.cover||(this.resource.cover={}),this.upload.base64DataUrl(a).then(function(a){this.resource.cover.file=a}.bind(this))},Z.prototype.removeCover=function(){this.resource.cover=null},angular.module("SongBook").controller("SongFormController",Z);var _=function(a,b){d.apply(this,arguments)};_.prototype=Object.create(d.prototype),_.$inject=d.$inject,_.prototype.sortBy="name",_.prototype.sortFields={name:"string",artist:"string",rating:"number",mastery:"number"},angular.module("SongBook").controller("SongListController",_);var aa=function(a){f.apply(this,arguments)};aa.prototype=Object.create(f.prototype),aa.$inject=f.$inject,angular.module("SongBook").controller("SongShowController",aa);var ba=function(){k.apply(this,arguments)};ba.prototype=Object.create(k.prototype),ba.prototype.constructor=ba,ba.$inject=k.$inject,ba.prototype.type="songs",ba.prototype.path="/songs/{id}",angular.module("SongBook").service("SongResource",ba),angular.module("SongBook").config(["apiResourceRouteProvider",function(a){a.register("SongBook","Song","songs")}]);var ca={};ca.en={delete_song:"Delete song",edit_song:"Edit song",my_songbook_title:"My Songbook",new_song:"Add a new song",no_song_found:"No song found.",show_song:"Show song",song:"song{COUNT, plural, =0{} one{} other{s}}"},ca.fr={delete_song:"Supprimer le morceau",edit_song:"Modifier le morceau",my_songbook_title:"Mon livre de chansons",new_song:"Ajouter une chanson",no_song_found:"Aucun morceau trouvé.",show_song:"Voir le morceau",song:"morceau{COUNT, plural, =0{} one{} other{x}}"};var da=function(a,b){d.apply(this,arguments)};da.prototype=Object.create(d.prototype),da.$inject=d.$inject,da.prototype.sortBy="name",da.prototype.sortFields={name:"string",notes_count:"string"},da.prototype.root=null,angular.module("Theory").controller("ChordListController",da);var ea=function(a,b){f.apply(this,arguments),this.notes=b};ea.prototype=Object.create(f.prototype),ea.$inject=f.$inject,angular.module("Theory").controller("ChordShowController",ea);var fa=function(a,b){this.services={},this.services.$uibModal=a,this.resources=b};fa.$inject=["$uibModal","resources"],fa.prototype.resources=[],angular.module("Theory").controller("DegreeListController",fa);var ga=function(a,b){this.services={},this.services.$uibModal=a,this.resources=b};ga.$inject=["$uibModal","resources"],ga.prototype.resources=[],ga.prototype.selected=null,ga.prototype.selectInterval=function(a){this.selected!==a?this.selected=a:this.selected=null},angular.module("Theory").controller("IntervalListController",ga);var ha=function(a,b){this.services={},this.services.$uibModal=a,this.resources=b};ha.$inject=["$uibModal","resources"],ha.prototype.resources=[],angular.module("Theory").controller("NoteListController",ha);var ia=function(a){this.notes=a.query().then(function(a){this.notes=a,this.current||(this.current=a[0])}.bind(this))};ia.$inject=["NoteResource"],ia.prototype.notes=[],ia.prototype.current=null,ia.prototype.previous=function(){var a=this.notes.indexOf(this.current);-1!==a&&this.notes[a-1]&&(this.current=this.notes[a-1])},ia.prototype.next=function(){var a=this.notes.indexOf(this.current);-1!==a&&this.notes[a+1]&&(this.current=this.notes[a+1])},angular.module("Theory").controller("NoteMenuController",ia);var ja=function(a,b){this.services={},this.services.$uibModal=a,this.resources=b};ja.$inject=["$uibModal","resources"],ja.prototype.resources=[],angular.module("Theory").controller("ScaleListController",ja);var ka=function(a){return{restrict:"E",templateUrl:a.getPartial("Interval/player.html","app/Theory"),replace:!0,scope:{interval:"="},bindToController:!0,controllerAs:"intervalPlayerCtrl",controller:["$scope","SoundService","IntervalResource","NoteResource",function(a,b,c,d){this.notes=d.query().then(function(a){return this.notes=a,this.referenceNote=a[57],a}.bind(this)),this.intervals=c.query().then(function(a){this.intervals=a}.bind(this)),this.tempo=70,this.referenceNote=null,this.calculatedNote=null,this.direction="ascending",this.setDirection=function(a){a!==this.direction&&("ascending"===a||"descending"===a?this.direction=a:console.error('Invalid interval direction. It can only be "ascending" or "descending".'))},this.setInterval=function(a){this.interval=a},this.calculateNote=function(){if(this.interval&&this.direction&&this.referenceNote){if("ascending"===this.direction)var a=this.referenceNote.attributes.value+this.interval.attributes.value;else var a=this.referenceNote.attributes.value-this.interval.attributes.value;this.calculatedNote=this.notes[a]}},this.incrementReference=function(){var a=this.referenceNote.attributes.value+1;this.referenceNote=this.notes[a]},this.decrementReference=function(){var a=this.referenceNote.attributes.value-1;this.referenceNote=this.notes[a]},this.playInterval=function(){b.playFrequency(this.referenceNote.attributes.frequency,0,1),b.playFrequency(this.calculatedNote.attributes.frequency,1,1)},a.$watch(function(){return this.interval}.bind(this),this.calculateNote.bind(this)),a.$watch(function(){return this.direction}.bind(this),this.calculateNote.bind(this)),a.$watch(function(){return this.referenceNote}.bind(this),this.calculateNote.bind(this))}],compile:function(){return{pre:function(a,b,c,d){d.dropdownOptions={setHeight:b.height()-70+"px"}}}}}};ka.$inject=["$client"],angular.module("Theory").directive("intervalPlayer",ka);var la=function(){return{restrict:"A",controller:["NoteResource",function(a){this.displayFlat=a.isDisplayFlat(),this.switchDisplay=function(){this.displayFlat=!this.displayFlat,a.setDisplayFlat(this.displayFlat)}}],controllerAs:"noteDisplaySwitchCtrl",bindToController:!0,link:function(a,b,c){}}};la.$inject=[],angular.module("Theory").directive("noteDisplaySwitch",la);var ma=function(a){return{restrict:"E",templateUrl:a.getPartial("Note/menu.html","app/Theory"),replace:!0,scope:{current:"="},controller:"NoteMenuController",controllerAs:"noteMenuCtrl",bindToController:!0}};ma.$inject=["$client"],angular.module("Theory").directive("noteMenu",ma),angular.module("Theory").directive("scaleRepresentation",["$client","NoteResource",function(a,b){return{restrict:"E",templateUrl:a.getPath("Scale/representation.html","app/Theory"),replace:!0,scope:{},controller:function(){},controllerAs:"noteSelectorCtrl",bindToController:!0,link:function(a,c,d){function e(a,b){var c=j+(l-30)*Math.cos(a),d=k+(l-30)*Math.sin(a),e=j+(l+30)*Math.cos(a),f=k+(l+30)*Math.sin(a);i.beginPath(),i.moveTo(c,d),i.lineTo(e,f),i.lineWidth=2,i.strokeStyle="rgba(0, 0, 0, 0.5)",i.stroke(),i.beginPath(),i.font="bold 12pt Calibri",i.fillText(notes[o].info.name,e,f)}function f(a,b){var c=j+(l-30)*Math.cos(a),d=k+(l-30)*Math.sin(a),e=j+(l+30)*Math.cos(a),f=k+(l+30)*Math.sin(a);i.beginPath(),i.moveTo(c,d),i.lineTo(e,f),i.lineWidth=5,i.strokeStyle="rgba(0, 0, 0, 0.5)",i.stroke(),i.beginPath(),i.font="bold 12pt Calibri",i.fillText(notes[o].info.name,e,f)}a.notes=b.query();var g=c.find("canvas").get(0),h=$(g);g.width=h.parent().width(),g.height=h.parent().width();var i=g.getContext("2d"),j=g.width/2,k=g.height/2,l=Math.round(g.width/8*3);i.beginPath(),i.arc(j,k,l,0,2*Math.PI,!1),i.lineWidth=40,i.strokeStyle="rgba(0, 0, 0, 0.25)",i.stroke();for(var m=360/notes.length*(2*Math.PI)/360,n=-Math.PI/2,o=0;o<notes.length;o++)notes[o].accidental?e(n,notes[o]):f(n,notes[o]),n+=m}}}]);var na=function(a){return function(b){var c=null;return b&&(c=a.displayFlat?b.attributes.flat_name:b.attributes.sharp_name),c}};na.$inject=["NoteResource"],angular.module("Theory").filter("note_name",na);var oa=function(a,b,c){k.apply(this,arguments)};oa.prototype=Object.create(k.prototype),oa.$inject=k.$inject,oa.prototype.type="chords",oa.prototype.path="/chords/{id}",angular.module("Theory").service("ChordResource",oa);var pa=function(a,b,c){k.apply(this,arguments)};pa.prototype=Object.create(k.prototype),pa.$inject=k.$inject,pa.prototype.type="degrees",pa.prototype.path="/degrees/{id}",angular.module("Theory").service("DegreeResource",pa);var qa=function(a,b,c){k.apply(this,arguments)};qa.prototype=Object.create(k.prototype),qa.$inject=k.$inject,qa.prototype.type="intervals",qa.prototype.path="/intervals/{id}",angular.module("Theory").service("IntervalResource",qa);var ra=function(a,b,c){k.apply(this,arguments)};ra.prototype=Object.create(k.prototype),ra.$inject=k.$inject,ra.prototype.type="notes",ra.prototype.path="/notes/{id}",ra.prototype.displayFlat=!1,ra.prototype.isDisplayFlat=function(){return this.displayFlat},ra.prototype.setDisplayFlat=function(a){a!==this.displayFlat&&(this.displayFlat=a)},angular.module("Theory").service("NoteResource",ra);var sa=function(a,b,c){k.apply(this,arguments)};sa.prototype=Object.create(k.prototype),sa.$inject=k.$inject,sa.prototype.type="scales",sa.prototype.path="/scales/{id}",angular.module("Theory").service("ScaleResource",sa),angular.module("Theory").config(["$routeProvider","$clientProvider","apiResourceRouteProvider",function(a,b,c){a.when("/theory",{templateUrl:b.getPartial("summary.html","app/Theory")}),c.register("Theory","Note","theory/notes",!0),c.register("Theory","Degree","theory/degrees",!0),c.register("Theory","Interval","theory/intervals",!0),c.register("Theory","Chord","theory/chords",!0),c.register("Theory","Scale","theory/scales",!0)}]);var ta={};ta.en={chord:"chord{COUNT, plural, =0{} one{} other{s}}",chord_count:"{ COUNT } chord{COUNT, plural, =0{} one{} other{s}}",interval_ascending:"Ascending interval",interval_descending:"Descending interval",interval_play:"Play interval",interval_select:"select an interval",note_count:"{ COUNT } note{COUNT, plural, =0{} one{} other{s}}",semitone_count:"{ COUNT } semitone{COUNT, plural, =0{} one{} other{s}}"},ta.fr={chord:"accord{COUNT, plural, =0{} one{} other{s}}",chord_count:"{ COUNT } accord{COUNT, plural, =0{} one{} other{s}}",interval_ascending:"Intervalle ascendant",interval_descending:"Intervalle descendant",interval_play:"Jouer l'intervalle",interval_select:"sélectionner un intervalle",note_count:"{ COUNT } note{COUNT, plural, =0{} one{} other{s}}",semitone_count:"{ COUNT } demi-ton{COUNT, plural, =0{} one{} other{s}}"};var ua=function(a){this.headstock="top-bottom",this.strings=6,this.notes=a.query().then(function(a){return this.notes=a,a}.bind(this))};ua.$inject=["NoteResource"],ua.prototype.strings=6,ua.prototype.headstock="top-bottom",ua.prototype.leftHanded=!1,ua.prototype.tuning=null,ua.prototype.tuningPegSize=36,ua.prototype.tuningPegs={"in-line":[{x:100,y:690,clockwise:!0},{x:145,y:580,clockwise:!0},{x:170,y:470,clockwise:!0},{x:195,y:360,clockwise:!0},{x:225,y:250,clockwise:!0},{x:250,y:140,clockwise:!0}],"top-bottom":[{x:85,y:580,clockwise:!0},{x:105,y:400,clockwise:!0},{x:100,y:220,clockwise:!0},{x:295,y:175,clockwise:!1},{x:290,y:355,clockwise:!1},{x:315,y:535,clockwise:!1}]},ua.prototype.draw=function(a){var b=a.getContext("2d");null!==b&&(a.height=2.15*a.width,b.translate(0,0),b.scale(a.width/400,a.height/860),this.drawHeadstock(b),this.drawNut(b),this.drawStrings(b))},ua.prototype.drawHeadstock=function(a){switch(a.beginPath(),a.moveTo(100,850),a.lineTo(300,850),this.headstock){case"top-bottom":a.bezierCurveTo(300,850,275,745,395,590),a.bezierCurveTo(415,500,310,440,380,5),a.bezierCurveTo(195,-30,5,125,10,150),a.bezierCurveTo(75,270,5,625,5,625),a.bezierCurveTo(100,730,100,850,100,850);break;case"in-line":a.bezierCurveTo(300,775,385,700,385,700),a.bezierCurveTo(315,435,355,265,365,20),a.bezierCurveTo(365,20,355,-5,340,10),a.bezierCurveTo(275,65,275,75,205,65),a.lineTo(15,755),a.bezierCurveTo(100,795,100,850,100,850)}a.closePath(),a.fillStyle="rgba(0, 0, 0, 0.25)",a.fill()},ua.prototype.drawNut=function(a){a.fillStyle="#777",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=10,a.shadowColor="black",a.beginPath(),a.rect(98,836,200,18),a.closePath(),a.fillStyle="#555",a.fill(),a.lineWidth=2,a.strokeStyle="#666",a.stroke()},ua.prototype.getTuningPegPosition=function(a,b){var c=0,d=0,e=!0;switch(this.headstock){case"top-bottom":break;case"in-line":var f=690,g=65,h={x:260,y:g},i={x:70,y:g+f},j=f/this.strings,k=j*b+j/2,l=Math.round(Math.sqrt(Math.pow(i.x-h.x,2)+Math.pow(i.y-h.y,2)));c=i.x+k*(h.x-i.x)/l,d=i.y+k*(h.y-i.y)/l}return c=this.fixPosition(c),d=this.fixPosition(d),{x:c,y:d,clockwise:e}},ua.prototype.fixPosition=function(a){var a=Math.round(a);return 0===a%2&&(a+=1),a},ua.prototype.drawStrings=function(a){for(var b=function(a,b){a.fillStyle="rgba(255, 255, 255, 0.25)",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=10,a.shadowColor="black",a.beginPath(),a.arc(b.x,b.y,38,0,2*Math.PI,!1),a.closePath(),a.fillStyle="#777",a.fill(),a.beginPath();var c=30,d=2*Math.PI/6;a.moveTo(c+b.x,b.y);for(var e=1;6>e;e++)a.lineTo(c*Math.cos(d*e)+b.x,c*Math.sin(d*e)+b.y);a.closePath(),a.fillStyle="#777",a.fill(),a.lineWidth=1,a.strokeStyle="rgba(0, 0, 0, 0.5)",a.stroke()},c=function(a,b,c,d,e){a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=5,a.shadowColor="black",a.beginPath(),a.moveTo(b,860),a.lineTo(b,836);var f=e.clockwise?e.x+16-d:e.x-16+d;a.lineTo(f,e.y),a.lineWidth=d,a.strokeStyle="#bbb",a.stroke()},d=function(a,b){a.fillStyle="rgba(255, 255, 255, 0.25)",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=10,a.shadowColor="black",a.beginPath(),a.arc(b.x,b.y,16,0,2*Math.PI,!1),a.closePath();var c=a.createRadialGradient(b.x,b.y,3,b.x,b.y,17);c.addColorStop(0,"#aaa"),c.addColorStop(1,"#666"),a.fillStyle=c,a.fill(),a.lineWidth=1,a.strokeStyle="#333",a.stroke()},e=0;e<this.strings;e++){var f=this.getTuningPegPosition(a,e);b(a,f)}for(var g=Math.round(200/this.strings),h=100+g/2,e=0;e<this.strings;e++){var i=this.strings+1-e,f=this.getTuningPegPosition(a,e);c(a,h,e,i,f),h+=g}for(var e=0;e<this.strings;e++){var f=this.getTuningPegPosition(a,e);d(a,f)}},angular.module("Tuning").controller("TuningWidgetController",ua);var va=function(a){return{restrict:"E",templateUrl:a.getPartial("widget.html","app/Tuning"),replace:!0,scope:{strings:"=",headstock:"=",leftHanded:"=",tuning:"=?"},bindToController:!0,controllerAs:"tuningWidgetCtrl",controller:"TuningWidgetController",link:function(a,b,c,d){var e=!0,f=b.find("canvas").get(0);d.draw(f),a.$watch(function(){return d.headstock},function(a,b){e||a==b||d.draw(f)}),a.$watch(function(){return d.strings},function(a,b){e||a==b||d.draw(f)}),b.on("resize",function(){d.draw(f)}),e=!1}}};va.$inject=["$client"],angular.module("Tuning").directive("tuningWidget",va);var wa=function(a,b,c){k.apply(this,arguments)};wa.prototype=Object.create(k.prototype),wa.$inject=k.$inject,wa.prototype.type="tuning",wa.prototype.path="/tunings/{id}",angular.module("Tuning").service("TuningResource",wa);var xa={};xa.en={tuning_select:"select a tuning"},xa.fr={tuning_select:"sélectionner un accordage"};var ya=function(){};ya.$inject=[],angular.module("User").controller("ProfileController",ya);var za=function(){};za.$inject=[],angular.module("User").controller("SettingsController",za),angular.module("User").directive("userMenu",["$client",function(a){return{restrict:"E",templateUrl:a.getPartial("menu.html","app/User"),replace:!0,scope:{},link:function(a,b,c){}}}]),angular.module("User").config(["$routeProvider","$clientProvider",function(a,b){a.when("/users",{templateUrl:b.getPartial("list.html","app/User"),controller:"ListViewController",controllerAs:"listViewCtrl"}),a.when("/profile",{templateUrl:b.getPartial("profile.html","app/User"),controller:"ProfileController",controllerAs:"profileCtrl"}),a.when("/profile/settings",{templateUrl:b.getPartial("settings.html","app/User"),controller:"SettingsController",controllerAs:"settingsCtrl"})}]),angular.module("App").config(["$routeProvider","$clientProvider",function(a,b){a.when("/page_not_found",{templateUrl:b.getPartial("Error/page_not_found.html","core/Layout",!0)}).when("/error_server",{templateUrl:b.getPartial("Error/server.html","core/Layout",!0)}).otherwise({redirectTo:"/page_not_found"})}]);var Aa={};Aa.en={"link.instrument":"my instruments","link.song_book":"my songbook","link.theory":"theory","link.musician":"musicians","link.advertisement":"advertisement","link.game":"games","link.forum":"forum","link.lesson":"lessons"},Aa.fr={"link.instrument":"mes instruments","link.song_book":"my songbook","link.theory":"théorie","link.musician":"musiciens","link.advertisement":"annonces","link.game":"jeux","link.forum":"forum","link.lesson":"cours"},angular.module("AppConfiguration",[]).constant("apiConfiguration",{basePath:"MusicTools/web/api_dev.php",uploadPath:"MusicTools/web"}).constant("clientConfiguration",{basePath:"/MusicTools/web"})}();